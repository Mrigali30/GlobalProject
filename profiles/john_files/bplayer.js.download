require=function e(t,r,n){function o(a,u){if(!r[a]){if(!t[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var r=t[a][1][e];return o(r?r:e)},c,c.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){"use strict";t.exports=function(e,t,r){if("function"==typeof Array.prototype.findIndex)return e.findIndex(t,r);if("function"!=typeof t)throw new TypeError("predicate must be a function");var n=Object(e),o=n.length;if(0===o)return-1;for(var i=0;i<o;i++)if(t.call(r,n[i],i,n))return i;return-1}},{}],2:[function(e,t,r){"use strict";function n(e){o(e),this.options=e}function o(e){var t;if(!e)throw new Error("options is required.");for(var r=0;r<l.length;r++)if(t=l[r],!e.hasOwnProperty(t))throw new Error("options."+t+" is required.");if(e.percentage>100||e.percentage<0)throw new Error("options.percentage range should be from 0 to 100.");if(0===e.buckets.length)throw new Error("options.buckets should have at least one bucket.")}function i(e){return new Date>e}function a(e,t){return s.parse(e.get(t))}function u(e,t){var r=s.random().toValue();e.set(t,r)}var s=e("./TestValue"),l=["name","expires","percentage","buckets","storage"],c="abt-";n.prototype={options:null,initialize:function(){var e,t=this.options.storage,r=this.getTestName();return i(this.options.expires)?void t.del(r):(e=a(t,r))?void t.set(r,e.toValue()):void u(t,r)},isBucketed:function(){var e=a(this.options.storage,this.getTestName());return!!e},getBucket:function(){var e=a(this.options.storage,this.getTestName());return e?e.getBucket(this.options.percentage,this.options.buckets):null},setBucket:function(e){var t=s.generateValueInBucket(this.options.percentage,this.options.buckets,e);this.options.storage.set(this.getTestName(),t.toValue())},forceOutOfBuckets:function(){var e=s.generateValueOutOfBuckets(this.options.percentage);this.options.storage.set(this.getTestName(),e.toValue())},getTestName:function(){return c+this.options.name}},t.exports=n},{"./TestValue":5}],3:[function(e,t,r){"use strict";function n(e){e&&(this.abTests=o(e))}function o(e){for(var t,r,n,o=Object.keys(e),s={},l=0;l<o.length;l++)n=o[l],t=e[n],r=new a(t.storageType||u,t),s[n]=new i({name:n,expires:t.expires,percentage:t.percentage,buckets:t.buckets,storage:r});return s}var i=e("./ABTest"),a=e("./Storage"),u="localStorage";n.prototype={abTests:null,initialize:function(){for(var e=Object.keys(this.abTests),t=0;t<e.length;t++)this.abTests[e[t]].initialize()},getABTest:function(e){return this.abTests[e]}},t.exports=n},{"./ABTest":2,"./Storage":4}],4:[function(e,t,r){"use strict";function n(e,t){if(this.options=t||{},this.storage=u[e],this.isCookieStorage="cookie"===e,!this.storage)throw new Error("Invalid storageType")}function o(e){return e.path||"/"}function i(e){return e.domain||window.location.hostname}function a(){return new Date((new Date).getTime()+s)}var u={cookie:e("./storage/Cookie"),localStorage:e("./storage/LocalStorage")},s=2592e6;n.prototype={options:null,storage:null,isCookieStorage:null,get:function(e){return this.storage.get(e)},set:function(e,t){return this.isCookieStorage?void this.storage.set(e,t,a(),o(this.options),i(this.options)):void this.storage.set(e,t)},del:function(e){return this.isCookieStorage?void this.storage.del(e,o(this.options),i(this.options)):void this.storage.del(e)}},t.exports=n},{"./storage/Cookie":6,"./storage/LocalStorage":7}],5:[function(e,t,r){"use strict";function n(e,t){this.scopedPercentageValue=e,this.scopedBucketValue=t}function o(e){return Math.floor(Math.random()*e)}function i(e,t,r){return e>=t&&e<r}function a(e,t){var r=100*e/l;return r<t}function u(e,t){var r=Math.floor(e*t.length/c);return t[r]}var s="|",l=1e3,c=1e3;n.prototype={scopedPercentageValue:null,scopedBucketValue:null,getBucket:function(e,t){return a(this.scopedPercentageValue,e)?u(this.scopedBucketValue,t):null},toValue:function(){return this.scopedPercentageValue+s+this.scopedBucketValue}},n.generateValueInBucket=function(e,t,r){var o,i=Math.floor(e*l/100),a=t.indexOf(r);if(a<0)throw new Error("bucket value: "+r+" not found in buckets");return i=i>=0?i-1:i,o=Math.floor((a+1)*c/t.length),o=o>=0?o-1:o,new n(i,o)},n.generateValueOutOfBuckets=function(e){var t;if(e>=100)throw new Error("You can't force user out of bucket when percentage >= 100.");return t=l-1,new n(t,1)},n.random=function(){return new n(o(l),o(c))},n.parse=function(e){var t,r,o;return e?(t=e.split(s),r=parseInt(t[0],10),o=parseInt(t[1],10),isNaN(r)||isNaN(o)?null:i(r,0,l)&&i(o,0,c)?new n(r,o):null):null},t.exports=n},{}],6:[function(e,t,r){"use strict";function n(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}var o={get:function(e){var t=document.cookie.match("(^|;) ?"+n(e)+"=([^;$]*)");return t?t[2]:null},set:function(e,t,r,n,o){var i=r?"; expires="+r.toGMTString():"",a=n?"; path="+n:"; path=/",u=o?"; domain="+o:"";document.cookie=e+"="+t+i+a+u},del:function(e,t,r){this.set(e,"",new Date(-1),t,r)}};t.exports=o},{}],7:[function(e,t,r){"use strict";function n(){try{return o in window&&window[o]}catch(e){return null}}var o="localStorage",i={get:function(e){var t=n();return t?t.getItem(e):null},set:function(e,t){var r=n();r&&r.setItem(e,t)},del:function(e){var t=n();t&&t.removeItem(e)}};t.exports=i},{}],8:[function(e,t,r){"use strict";var n,o=e("es5-ext/object/assign"),i=e("es5-ext/object/normalize-options"),a=e("es5-ext/object/is-callable"),u=e("es5-ext/string/#/contains");n=t.exports=function(e,t){var r,n,a,s,l;return arguments.length<2||"string"!=typeof e?(s=t,t=e,e=null):s=arguments[2],null==e?(r=a=!0,n=!1):(r=u.call(e,"c"),n=u.call(e,"e"),a=u.call(e,"w")),l={value:t,configurable:r,enumerable:n,writable:a},s?o(i(s),l):l},n.gs=function(e,t,r){var n,s,l,c;return"string"!=typeof e?(l=r,r=t,t=e,e=null):l=arguments[3],null==t?t=void 0:a(t)?null==r?r=void 0:a(r)||(l=r,r=void 0):(l=t,t=r=void 0),null==e?(n=!0,s=!1):(n=u.call(e,"c"),s=u.call(e,"e")),c={get:t,set:r,configurable:n,enumerable:s},l?o(i(l),c):c}},{"es5-ext/object/assign":10,"es5-ext/object/is-callable":13,"es5-ext/object/normalize-options":17,"es5-ext/string/#/contains":19}],9:[function(e,t,r){"use strict";t.exports=new Function("return this")()},{}],10:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?Object.assign:e("./shim")},{"./is-implemented":11,"./shim":12}],11:[function(e,t,r){"use strict";t.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},{}],12:[function(e,t,r){"use strict";var n=e("../keys"),o=e("../valid-value"),i=Math.max;t.exports=function(e,t){var r,a,u,s=i(arguments.length,2);for(e=Object(o(e)),u=function(n){try{e[n]=t[n]}catch(e){r||(r=e)}},a=1;a<s;++a)t=arguments[a],n(t).forEach(u);if(void 0!==r)throw r;return e}},{"../keys":14,"../valid-value":18}],13:[function(e,t,r){"use strict";t.exports=function(e){return"function"==typeof e}},{}],14:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?Object.keys:e("./shim")},{"./is-implemented":15,"./shim":16}],15:[function(e,t,r){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},{}],16:[function(e,t,r){"use strict";var n=Object.keys;t.exports=function(e){return n(null==e?e:Object(e))}},{}],17:[function(e,t,r){"use strict";var n=Array.prototype.forEach,o=Object.create,i=function(e,t){var r;for(r in e)t[r]=e[r]};t.exports=function(e){var t=o(null);return n.call(arguments,function(e){null!=e&&i(Object(e),t)}),t}},{}],18:[function(e,t,r){"use strict";t.exports=function(e){if(null==e)throw new TypeError("Cannot use null or undefined");return e}},{}],19:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?String.prototype.contains:e("./shim")},{"./is-implemented":20,"./shim":21}],20:[function(e,t,r){"use strict";var n="razdwatrzy";t.exports=function(){return"function"==typeof n.contains&&(n.contains("dwa")===!0&&n.contains("foo")===!1)}},{}],21:[function(e,t,r){"use strict";var n=String.prototype.indexOf;t.exports=function(e){return n.call(this,e,arguments[1])>-1}},{}],22:[function(e,t,r){"use strict";function n(e,t){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var r=Object(e),n=1;n<arguments.length;n++){var o=arguments[n];if(void 0!==o&&null!==o)for(var i=Object.keys(Object(o)),a=0,u=i.length;a<u;a++){var s=i[a],l=Object.getOwnPropertyDescriptor(o,s);void 0!==l&&l.enumerable&&(r[s]=o[s])}}return r}function o(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:n})}t.exports={assign:n,polyfill:o}},{}],23:[function(e,t,r){(function(n,o){!function(e,n){"object"==typeof r&&"undefined"!=typeof t?t.exports=n():"function"==typeof define&&define.amd?define(n):e.ES6Promise=n()}(this,function(){"use strict";function t(e){return"function"==typeof e||"object"==typeof e&&null!==e}function r(e){return"function"==typeof e}function i(e){$=e}function a(e){W=e}function u(){return function(){return n.nextTick(d)}}function s(){return"undefined"!=typeof Q?function(){Q(d)}:f()}function l(){var e=0,t=new Z(d),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function c(){var e=new MessageChannel;return e.port1.onmessage=d,function(){return e.port2.postMessage(0)}}function f(){var e=setTimeout;return function(){return e(d,1)}}function d(){for(var e=0;e<K;e+=2){var t=re[e],r=re[e+1];t(r),re[e]=void 0,re[e+1]=void 0}K=0}function p(){try{var t=e,r=t("vertx");return Q=r.runOnLoop||r.runOnContext,s()}catch(e){return f()}}function h(e,t){var r=arguments,n=this,o=new this.constructor(v);void 0===o[oe]&&x(o);var i=n._state;return i?!function(){var e=r[i-1];W(function(){return L(i,o,e,n._result)})}():k(n,o,e,t),o}function y(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var r=new t(v);return S(r,e),r}function v(){}function b(){return new TypeError("You cannot resolve a promise with itself")}function g(){return new TypeError("A promises callback cannot return that same promise.")}function m(e){try{return e.then}catch(e){return se.error=e,se}}function _(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function w(e,t,r){W(function(e){var n=!1,o=_(r,t,function(r){n||(n=!0,t!==r?S(e,r):T(e,r))},function(t){n||(n=!0,A(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&o&&(n=!0,A(e,o))},e)}function E(e,t){t._state===ae?T(e,t._result):t._state===ue?A(e,t._result):k(t,void 0,function(t){return S(e,t)},function(t){return A(e,t)})}function O(e,t,n){t.constructor===e.constructor&&n===h&&t.constructor.resolve===y?E(e,t):n===se?A(e,se.error):void 0===n?T(e,t):r(n)?w(e,t,n):T(e,t)}function S(e,r){e===r?A(e,b()):t(r)?O(e,r,m(r)):T(e,r)}function P(e){e._onerror&&e._onerror(e._result),I(e)}function T(e,t){e._state===ie&&(e._result=t,e._state=ae,0!==e._subscribers.length&&W(I,e))}function A(e,t){e._state===ie&&(e._state=ue,e._result=t,W(P,e))}function k(e,t,r,n){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+ae]=r,o[i+ue]=n,0===i&&e._state&&W(I,e)}function I(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,o=void 0,i=e._result,a=0;a<t.length;a+=3)n=t[a],o=t[a+r],n?L(r,n,o,i):o(i);e._subscribers.length=0}}function j(){this.error=null}function R(e,t){try{return e(t)}catch(e){return le.error=e,le}}function L(e,t,n,o){var i=r(n),a=void 0,u=void 0,s=void 0,l=void 0;if(i){if(a=R(n,o),a===le?(l=!0,u=a.error,a=null):s=!0,t===a)return void A(t,g())}else a=o,s=!0;t._state!==ie||(i&&s?S(t,a):l?A(t,u):e===ae?T(t,a):e===ue&&A(t,a))}function C(e,t){try{t(function(t){S(e,t)},function(t){A(e,t)})}catch(t){A(e,t)}}function D(){return ce++}function x(e){e[oe]=ce++,e._state=void 0,e._result=void 0,e._subscribers=[]}function N(e,t){this._instanceConstructor=e,this.promise=new e(v),this.promise[oe]||x(this.promise),Y(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?T(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&T(this.promise,this._result))):A(this.promise,M())}function M(){return new Error("Array Methods must be provided an Array")}function V(e){return new N(this,e).promise}function F(e){var t=this;return new t(Y(e)?function(r,n){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(r,n)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function U(e){var t=this,r=new t(v);return A(r,e),r}function B(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function G(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function z(e){this[oe]=D(),this._result=this._state=void 0,this._subscribers=[],v!==e&&("function"!=typeof e&&B(),this instanceof z?C(this,e):G())}function q(){var e=void 0;if("undefined"!=typeof o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=z}var H=void 0;H=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var Y=H,K=0,Q=void 0,$=void 0,W=function(e,t){re[K]=e,re[K+1]=t,K+=2,2===K&&($?$(d):ne())},J="undefined"!=typeof window?window:void 0,X=J||{},Z=X.MutationObserver||X.WebKitMutationObserver,ee="undefined"==typeof self&&"undefined"!=typeof n&&"[object process]"==={}.toString.call(n),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,re=new Array(1e3),ne=void 0;ne=ee?u():Z?l():te?c():void 0===J&&"function"==typeof e?p():f();var oe=Math.random().toString(36).substring(16),ie=void 0,ae=1,ue=2,se=new j,le=new j,ce=0;return N.prototype._enumerate=function(){for(var e=this.length,t=this._input,r=0;this._state===ie&&r<e;r++)this._eachEntry(t[r],r)},N.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===y){var o=m(e);if(o===h&&e._state!==ie)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(r===z){var i=new r(v);O(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},N.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===ie&&(this._remaining--,e===ue?A(n,r):this._result[t]=r),0===this._remaining&&T(n,this._result)},N.prototype._willSettleAt=function(e,t){var r=this;k(e,void 0,function(e){return r._settledAt(ae,t,e)},function(e){return r._settledAt(ue,t,e)})},z.all=V,z.race=F,z.resolve=y,z.reject=U,z._setScheduler=i,z._setAsap=a,z._asap=W,z.prototype={constructor:z,then:h,catch:function(e){return this.then(null,e)}},z.polyfill=q,z.Promise=z,z})}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:31}],24:[function(e,t,r){"use strict";e("./is-implemented")()||Object.defineProperty(e("es5-ext/global"),"Symbol",{value:e("./polyfill"),configurable:!0,enumerable:!1,writable:!0})},{"./is-implemented":25,"./polyfill":27,"es5-ext/global":9}],25:[function(e,t,r){"use strict";var n={object:!0,symbol:!0};t.exports=function(){var e;if("function"!=typeof Symbol)return!1;e=Symbol("test symbol");try{String(e)}catch(e){return!1}return!!n[typeof Symbol.iterator]&&(!!n[typeof Symbol.toPrimitive]&&!!n[typeof Symbol.toStringTag])}},{}],26:[function(e,t,r){"use strict";t.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&("Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag]))}},{}],27:[function(e,t,r){"use strict";var n,o,i,a,u=e("d"),s=e("./validate-symbol"),l=Object.create,c=Object.defineProperties,f=Object.defineProperty,d=Object.prototype,p=l(null);if("function"==typeof Symbol){n=Symbol;try{String(n()),a=!0}catch(e){}}var h=function(){var e=l(null);return function(t){for(var r,n,o=0;e[t+(o||"")];)++o;return t+=o||"",e[t]=!0,r="@@"+t,f(d,r,u.gs(null,function(e){n||(n=!0,f(this,r,u(e)),n=!1)})),r}}();i=function(e){if(this instanceof i)throw new TypeError("TypeError: Symbol is not a constructor");return o(e)},t.exports=o=function e(t){var r;if(this instanceof e)throw new TypeError("TypeError: Symbol is not a constructor");return a?n(t):(r=l(i.prototype),t=void 0===t?"":String(t),c(r,{__description__:u("",t),__name__:u("",h(t))}))},c(o,{for:u(function(e){return p[e]?p[e]:p[e]=o(String(e))}),keyFor:u(function(e){var t;s(e);for(t in p)if(p[t]===e)return t}),hasInstance:u("",n&&n.hasInstance||o("hasInstance")),isConcatSpreadable:u("",n&&n.isConcatSpreadable||o("isConcatSpreadable")),iterator:u("",n&&n.iterator||o("iterator")),match:u("",n&&n.match||o("match")),replace:u("",n&&n.replace||o("replace")),search:u("",n&&n.search||o("search")),species:u("",n&&n.species||o("species")),split:u("",n&&n.split||o("split")),toPrimitive:u("",n&&n.toPrimitive||o("toPrimitive")),toStringTag:u("",n&&n.toStringTag||o("toStringTag")),unscopables:u("",n&&n.unscopables||o("unscopables"))}),c(i.prototype,{constructor:u(o),toString:u("",function(){return this.__name__})}),c(o.prototype,{toString:u(function(){return"Symbol ("+s(this).__description__+")"}),valueOf:u(function(){return s(this)})}),f(o.prototype,o.toPrimitive,u("",function(){var e=s(this);return"symbol"==typeof e?e:e.toString()})),f(o.prototype,o.toStringTag,u("c","Symbol")),f(i.prototype,o.toStringTag,u("c",o.prototype[o.toStringTag])),f(i.prototype,o.toPrimitive,u("c",o.prototype[o.toPrimitive]))},{"./validate-symbol":28,d:8}],28:[function(e,t,r){"use strict";var n=e("./is-symbol");t.exports=function(e){if(!n(e))throw new TypeError(e+" is not a symbol");return e}},{"./is-symbol":26}],29:[function(e,t,r){"use strict";var n=/[|\\{}()[\]^$+*?.]/g;t.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(n,"\\$&")}},{}],30:[function(e,t,r){(function(e){function n(e,t){return e.set(t[0],t[1]),e}function o(e,t){return e.add(t),e}function i(e,t){for(var r=-1,n=e?e.length:0;++r<n&&t(e[r],r,e)!==!1;);return e}function a(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}function u(e,t,r,n){var o=-1,i=e?e.length:0;for(n&&i&&(r=e[++o]);++o<i;)r=t(r,e[o],o,e);return r}function s(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function l(e,t){return null==e?void 0:e[t]}function c(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function f(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function d(e,t){return function(r){return e(t(r))}}function p(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function h(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function y(){this.__data__=Ft?Ft(null):{}}function v(e){return this.has(e)&&delete this.__data__[e]}function b(e){var t=this.__data__;if(Ft){var r=t[e];return r===Ie?void 0:r}return wt.call(t,e)?t[e]:void 0}function g(e){var t=this.__data__;return Ft?void 0!==t[e]:wt.call(t,e)}function m(e,t){var r=this.__data__;return r[e]=Ft&&void 0===t?Ie:t,this}function _(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function w(){this.__data__=[]}function E(e){var t=this.__data__,r=U(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():jt.call(t,r,1),!0}function O(e){var t=this.__data__,r=U(t,e);return r<0?void 0:t[r][1]}function S(e){return U(this.__data__,e)>-1}function P(e,t){var r=this.__data__,n=U(r,e);return n<0?r.push([e,t]):r[n][1]=t,this}function T(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function A(){this.__data__={hash:new h,map:new(xt||_),string:new h}}function k(e){return ae(this,e).delete(e)}function I(e){return ae(this,e).get(e)}function j(e){return ae(this,e).has(e)}function R(e,t){return ae(this,e).set(e,t),this}function L(e){this.__data__=new _(e)}function C(){this.__data__=new _}function D(e){return this.__data__.delete(e)}function x(e){return this.__data__.get(e)}function N(e){return this.__data__.has(e)}function M(e,t){var r=this.__data__;if(r instanceof _){var n=r.__data__;if(!xt||n.length<ke-1)return n.push([e,t]),this;r=this.__data__=new T(n)}return r.set(e,t),this}function V(e,t){var r=$t(e)||ge(e)?s(e.length,String):[],n=r.length,o=!!n;for(var i in e)!t&&!wt.call(e,i)||o&&("length"==i||fe(i,n))||r.push(i);return r}function F(e,t,r){var n=e[t];wt.call(e,t)&&be(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function U(e,t){for(var r=e.length;r--;)if(be(e[r][0],t))return r;return-1}function B(e,t){return e&&ne(t,Pe(t),e)}function G(e,t,r,n,o,a,u){var s;if(n&&(s=a?n(e,o,a,u):n(e)),void 0!==s)return s;if(!Oe(e))return e;var l=$t(e);if(l){if(s=se(e),!t)return re(e,s)}else{var f=Qt(e),d=f==Ne||f==Me;if(Wt(e))return Q(e,t);if(f==Ue||f==Re||d&&!a){if(c(e))return a?e:{};if(s=le(d?{}:e),!t)return oe(e,B(s,e))}else{if(!st[f])return a?e:{};s=ce(e,f,G,t)}}u||(u=new L);var p=u.get(e);if(p)return p;if(u.set(e,s),!l)var h=r?ie(e):Pe(e);return i(h||e,function(o,i){h&&(i=o,o=e[i]),F(s,i,G(o,t,r,n,i,e,u))}),s}function z(e){return Oe(e)?kt(e):{}}function q(e,t,r){var n=t(e);return $t(e)?n:a(n,r(e))}function H(e){return Et.call(e)}function Y(e){if(!Oe(e)||pe(e))return!1;var t=we(e)||c(e)?Ot:at;return t.test(ye(e))}function K(e){if(!he(e))return Ct(e);var t=[];for(var r in Object(e))wt.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Q(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}function $(e){var t=new e.constructor(e.byteLength);return new Tt(t).set(new Tt(e)),t}function W(e,t){var r=t?$(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function J(e,t,r){var o=t?r(f(e),!0):f(e);return u(o,n,new e.constructor)}function X(e){var t=new e.constructor(e.source,it.exec(e));return t.lastIndex=e.lastIndex,t}function Z(e,t,r){var n=t?r(p(e),!0):p(e);return u(n,o,new e.constructor)}function ee(e){return Yt?Object(Yt.call(e)):{}}function te(e,t){var r=t?$(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function re(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function ne(e,t,r,n){r||(r={});for(var o=-1,i=t.length;++o<i;){var a=t[o],u=n?n(r[a],e[a],a,r,e):void 0;F(r,a,void 0===u?e[a]:u)}return r}function oe(e,t){return ne(e,Kt(e),t)}function ie(e){return q(e,Pe,Kt)}function ae(e,t){var r=e.__data__;return de(t)?r["string"==typeof t?"string":"hash"]:r.map}function ue(e,t){var r=l(e,t);return Y(r)?r:void 0}function se(e){var t=e.length,r=e.constructor(t);return t&&"string"==typeof e[0]&&wt.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function le(e){return"function"!=typeof e.constructor||he(e)?{}:z(At(e))}function ce(e,t,r,n){var o=e.constructor;switch(t){case Ke:return $(e);case Ce:case De:return new o(+e);case Qe:return W(e,n);case $e:case We:case Je:case Xe:case Ze:case et:case tt:case rt:case nt:return te(e,n);case Ve:return J(e,n,r);case Fe:case qe:return new o(e);case Ge:return X(e);case ze:return Z(e,n,r);case He:return ee(e)}}function fe(e,t){return t=null==t?je:t,!!t&&("number"==typeof e||ut.test(e))&&e>-1&&e%1==0&&e<t}function de(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function pe(e){return!!mt&&mt in e}function he(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||bt;return e===r}function ye(e){if(null!=e){try{return _t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ve(e){return G(e,!0,!0)}function be(e,t){return e===t||e!==e&&t!==t}function ge(e){return _e(e)&&wt.call(e,"callee")&&(!It.call(e,"callee")||Et.call(e)==Re)}function me(e){return null!=e&&Ee(e.length)&&!we(e)}function _e(e){return Se(e)&&me(e)}function we(e){var t=Oe(e)?Et.call(e):"";return t==Ne||t==Me}function Ee(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=je}function Oe(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Se(e){return!!e&&"object"==typeof e}function Pe(e){return me(e)?V(e):K(e)}function Te(){return[]}function Ae(){return!1}var ke=200,Ie="__lodash_hash_undefined__",je=9007199254740991,Re="[object Arguments]",Le="[object Array]",Ce="[object Boolean]",De="[object Date]",xe="[object Error]",Ne="[object Function]",Me="[object GeneratorFunction]",Ve="[object Map]",Fe="[object Number]",Ue="[object Object]",Be="[object Promise]",Ge="[object RegExp]",ze="[object Set]",qe="[object String]",He="[object Symbol]",Ye="[object WeakMap]",Ke="[object ArrayBuffer]",Qe="[object DataView]",$e="[object Float32Array]",We="[object Float64Array]",Je="[object Int8Array]",Xe="[object Int16Array]",Ze="[object Int32Array]",et="[object Uint8Array]",tt="[object Uint8ClampedArray]",rt="[object Uint16Array]",nt="[object Uint32Array]",ot=/[\\^$.*+?()[\]{}|]/g,it=/\w*$/,at=/^\[object .+?Constructor\]$/,ut=/^(?:0|[1-9]\d*)$/,st={};st[Re]=st[Le]=st[Ke]=st[Qe]=st[Ce]=st[De]=st[$e]=st[We]=st[Je]=st[Xe]=st[Ze]=st[Ve]=st[Fe]=st[Ue]=st[Ge]=st[ze]=st[qe]=st[He]=st[et]=st[tt]=st[rt]=st[nt]=!0,st[xe]=st[Ne]=st[Ye]=!1;var lt="object"==typeof e&&e&&e.Object===Object&&e,ct="object"==typeof self&&self&&self.Object===Object&&self,ft=lt||ct||Function("return this")(),dt="object"==typeof r&&r&&!r.nodeType&&r,pt=dt&&"object"==typeof t&&t&&!t.nodeType&&t,ht=pt&&pt.exports===dt,yt=Array.prototype,vt=Function.prototype,bt=Object.prototype,gt=ft["__core-js_shared__"],mt=function(){var e=/[^.]+$/.exec(gt&&gt.keys&&gt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),_t=vt.toString,wt=bt.hasOwnProperty,Et=bt.toString,Ot=RegExp("^"+_t.call(wt).replace(ot,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),St=ht?ft.Buffer:void 0,Pt=ft.Symbol,Tt=ft.Uint8Array,At=d(Object.getPrototypeOf,Object),kt=Object.create,It=bt.propertyIsEnumerable,jt=yt.splice,Rt=Object.getOwnPropertySymbols,Lt=St?St.isBuffer:void 0,Ct=d(Object.keys,Object),Dt=ue(ft,"DataView"),xt=ue(ft,"Map"),Nt=ue(ft,"Promise"),Mt=ue(ft,"Set"),Vt=ue(ft,"WeakMap"),Ft=ue(Object,"create"),Ut=ye(Dt),Bt=ye(xt),Gt=ye(Nt),zt=ye(Mt),qt=ye(Vt),Ht=Pt?Pt.prototype:void 0,Yt=Ht?Ht.valueOf:void 0;h.prototype.clear=y,h.prototype.delete=v,h.prototype.get=b,h.prototype.has=g,h.prototype.set=m,_.prototype.clear=w,_.prototype.delete=E,_.prototype.get=O,_.prototype.has=S,_.prototype.set=P,T.prototype.clear=A,T.prototype.delete=k,T.prototype.get=I,T.prototype.has=j,T.prototype.set=R,L.prototype.clear=C,L.prototype.delete=D,L.prototype.get=x,L.prototype.has=N,L.prototype.set=M;var Kt=Rt?d(Rt,Object):Te,Qt=H;(Dt&&Qt(new Dt(new ArrayBuffer(1)))!=Qe||xt&&Qt(new xt)!=Ve||Nt&&Qt(Nt.resolve())!=Be||Mt&&Qt(new Mt)!=ze||Vt&&Qt(new Vt)!=Ye)&&(Qt=function(e){var t=Et.call(e),r=t==Ue?e.constructor:void 0,n=r?ye(r):void 0;if(n)switch(n){case Ut:return Qe;case Bt:return Ve;case Gt:return Be;case zt:return ze;case qt:return Ye}return t});var $t=Array.isArray,Wt=Lt||Ae;t.exports=ve}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],31:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(f===setTimeout)return setTimeout(e,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function a(e){if(d===clearTimeout)return clearTimeout(e);if((d===o||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function u(){v&&h&&(v=!1,h.length?y=h.concat(y):b=-1,y.length&&s())}function s(){if(!v){var e=i(u);v=!0;for(var t=y.length;t;){for(h=y,y=[];++b<t;)h&&h[b].run();b=-1,t=y.length}h=null,v=!1,a(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var f,d,p=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(e){f=n}try{d="function"==typeof clearTimeout?clearTimeout:o}catch(e){d=o}}();var h,y=[],v=!1,b=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];y.push(new l(e,t)),1!==y.length||v||i(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],32:[function(e,t,r){function n(e,t){var r=t||0,n=o;return n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]}for(var o=[],i=0;i<256;++i)o[i]=(i+256).toString(16).substr(1);t.exports=n},{}],33:[function(e,t,r){(function(e){var r,n=e.crypto||e.msCrypto;if(n&&n.getRandomValues){var o=new Uint8Array(16);r=function(){return n.getRandomValues(o),o}}if(!r){var i=new Array(16);r=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],34:[function(e,t,r){function n(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var a=e.random||(e.rng||o)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var u=0;u<16;++u)t[n+u]=a[u];return t||i(a)}var o=e("./lib/rng"),i=e("./lib/bytesToUuid");t.exports=n},{"./lib/bytesToUuid":32,"./lib/rng":33}],35:[function(e,t,r){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function r(e){return"string"!=typeof e&&(e=String(e)),e}function n(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return b.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function u(e){var t=new FileReader,r=a(t);return t.readAsArrayBuffer(e),r}function s(e){var t=new FileReader,r=a(t);return t.readAsText(e),r}function l(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}function c(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(b.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(b.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(b.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(b.arrayBuffer&&b.blob&&m(e))this._bodyArrayBuffer=c(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!b.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!_(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"));
},b.blob&&(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(u)}),this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return s(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},b.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(e){var t=e.toUpperCase();return w.indexOf(t)>-1?t:e}function p(e,t){t=t||{};var r=t.body;if(e instanceof p){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=d(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function h(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}}),t}function y(e){var t=new o;return e.split(/\r?\n/).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();t.append(n,o)}}),t}function v(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var b={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(b.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=function(e){return e&&DataView.prototype.isPrototypeOf(e)},_=ArrayBuffer.isView||function(e){return e&&g.indexOf(Object.prototype.toString.call(e))>-1};o.prototype.append=function(e,n){e=t(e),n=r(n);var o=this.map[e];this.map[e]=o?o+","+n:n},o.prototype.delete=function(e){delete this.map[t(e)]},o.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,n){this.map[t(e)]=r(n)},o.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),n(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),n(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),n(e)},b.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},f.call(p.prototype),f.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];v.redirect=function(e,t){if(E.indexOf(t)===-1)throw new RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=p,e.Response=v,e.fetch=function(e,t){return new Promise(function(r,n){var o=new p(e,t),i=new XMLHttpRequest;i.onload=function(){var e={status:i.status,statusText:i.statusText,headers:y(i.getAllResponseHeaders()||"")};e.url="responseURL"in i?i.responseURL:e.headers.get("X-Request-URL");var t="response"in i?i.response:i.responseText;r(new v(t,e))},i.onerror=function(){n(new TypeError("Network request failed"))},i.ontimeout=function(){n(new TypeError("Network request failed"))},i.open(o.method,o.url,!0),"include"===o.credentials&&(i.withCredentials=!0),"responseType"in i&&b.blob&&(i.responseType="blob"),o.headers.forEach(function(e,t){i.setRequestHeader(t,e)}),i.send("undefined"==typeof o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},{}],36:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){return o.main(e,t,r)}function i(e){s(e),l(e)}function a(e,t){t.on(h.default.DISPOSE,u.bind(null,e)),k[e]=t}function u(e){k[e]=null}function s(e){P.initGTM(e.use_google_tag_manager,e.google_tag_manager_data_layer_id)}function l(e){if(!e.log_debug){var t=new URL(window.location),r=_.default.parseQueryString(t.search);e.log_debug=r&&"true"===r[A]}var n=e.log_debug?S.default.getLogLevels().TRACE:S.default.getLogLevels().ERROR;T.setMinLogLevel(n)}e("./lib/gtm-controller"),e("./legacy/globalize");var c=e("bvp-shims"),f=e("./facade/facade-player"),d=n(f),p=e("./events/player-events"),h=n(p),y=e("./events/playlist-events"),v=n(y),b=e("./lib/playlist/playlist-player"),g=n(b),m=e("./utils/query-string"),_=n(m),w=e("./strategy/StrategyTypes"),E=n(w),O=e("log"),S=n(O),P=window.BVP_GTM,T=new S.default("BPlayer"),A="bvp_log_debug",k={};Object.defineProperties(o,{VERSION:{value:c.version},events:{value:Object.freeze({PlayerEvents:h.default,PlaylistEvents:v.default})}}),Object.assign(o,{main:function(e,t,r){if(!arguments.length)return void(console&&console.error&&console.error("Attempted to initialize player without arguments"));i(t);var n=new d.default(t,r,E.default.SCRIPT,e);return a(t.htmlChildId,n),n},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];i(t),t.containerElement=e;var n=new d.default(t,r,E.default.EMBED);return a(t.htmlChildId,n),n},createPlaylistPlayer:function(e,t,r){var n="[object Array]"===Object.prototype.toString.call(t)?t[0]:t;i(n),n.containerElement=e;var o=new g.default(e,t,r);return a(n.htmlChildId,o),o},getPlayer:function(e){return k[e]}}),setTimeout(function(){var e=new CustomEvent("BPlayerLoaded",{detail:{bplayer:o,version:c.version},bubbles:!0});document.dispatchEvent(e)}),window.BPlayer=window.BPlayer||o,t.exports=o},{"./events/player-events":38,"./events/playlist-events":39,"./facade/facade-player":41,"./legacy/globalize":42,"./lib/gtm-controller":43,"./lib/playlist/playlist-player":45,"./strategy/StrategyTypes":52,"./utils/query-string":60,"bvp-shims":"bvp-shims",log:"log"}],37:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={AD_ALMOST_FINISHED:"AD_ALMOST_FINISHED",AD_CLICKED:"AD_CLICKED",AD_COMPLETED:"AD_COMPLETED",AD_LOAD_ERROR:"AD_LOAD_ERROR",AD_LOAD_TIMED_OUT:"AD_LOAD_TIMED_OUT",AD_LOADING:"AD_LOADING",AD_LOADED:"AD_LOADED",AD_PAUSED:"AD_PAUSED",AD_PLAY_ERROR:"AD_PLAY_ERROR",AD_PLAYBACK_PROGRESS_UPDATE:"AD_PLAYBACK_PROGRESS_UPDATE",AD_PLAYBACK_TIMED_OUT:"AD_PLAYBACK_TIMED_OUT",AD_REQUESTED:"AD_REQUESTED",AD_RESUMED:"AD_RESUMED",AD_STARTED:"AD_STARTED",ADS_FAILURE:"ADS_FAILURE",ADS_READY:"ADS_READY",ALL_ADS_COMPLETED:"ALL_ADS_COMPLETED",CLIP:"clip",CONTENT_PAUSE_REQUESTED:"CONTENT_PAUSE_REQUESTED",CONTENT_RESUME_REQUESTED:"CONTENT_RESUME_REQUESTED",DURATION_CHANGE:"DURATION_CHANGE",MAX_RETRIES_REACHED:"MAX_RETRIES_REACHED",OVERLAY_COMPLETE:"OVERLAY_COMPLETE",OVERLAY_STARTED:"OVERLAY_STARTED",PAUSED:"PAUSED",REQUEST_AD_PAUSE:"REQUEST_AD_PAUSE",REQUEST_AD_PLAY:"REQUEST_AD_PLAY",RESUMED:"RESUMED",STARTED:"STARTED",SKIPPED:"SKIPPED"};r.default=n},{}],38:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={AD_LOADING:"adloading",ADS_LOAD_ERROR:"adsloaderror",ADS_LOAD_TIMEOUT:"adsloadtimeout",ADS_PLAY_ERROR:"adsplayerror",ADS_PLAY_TIMEOUT:"adsplaytimeout",ADS_TIMEOUT_ERROR:"adstimeouterror",BITRATE_CHANGE:"bitrateChange",BUFFER:"buffer",CAPTIONS_CHANGE:"captionschange",CONTENT_CHANGE:"contentchange",DISPOSE:"dispose",DURATION_CHANGE:"durationchange",ENDED:"ended",ERROR:"error",FATAL_ERROR:"fatalError",FETCH_OVERLAY:"fetchOverlay",FULL_SCREEN_CHANGE:"fullscreenchange",HLS_BRIDGE_ERROR:"hlsBridgeError",HLS_BRIDGE_FATAL_ERROR:"hlsBridgeFatalError",HLS_CUE_IN:"hlsCueIn",HLS_CUE_OUT:"hlsCueOut",HLS_CUE_OUT_LOADED:"hlsCueOutLoaded",LOADED_METADATA:"loadedmetadata",LOADED_METADATA_SHIM:"loadedmetadata_shim",PAUSE:"pause",PLAY:"play",PLAY_PREROLL:"playPreroll",PREPARED_MIDROLL:"preparemidroll",READY:"ready",REQUEST_SHARE:"requestShare",RETRY:"retry",SEEK_START:"seekStart",SHARE:"share",SHARE_ACTION:"share_action",SHOW_OVERLAY:"showOverlay",START_MIDROLL:"startmidroll",TIMEUPDATE:"timeupdate",TRACK_INFO:"track-info",USER_ACTIVE:"useractive",USER_INACTIVE:"userinactive",VOLUME_CHANGE:"volumechange",WATCHDOG_RELOAD:"watchdogreload",BVP_VOLUME_CHANGE:"bvp_volumechange",CONTINUOUS_PLAY_START:"continuousPlayStart",COMPANION_AD:"companionAd",VIDEO_CHANGE:"videoChange",REPLAY:"replay"};r.default=n},{}],39:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={ALL_ITEMS_PLAYED:"ALL_ITEMS_PLAYED",ITEM_LOAD:"ITEM_LOAD",ITEM_PRELOAD:"ITEM_PRELOAD",ITEM_UNLOAD:"ITEM_UNLOAD",RESIZE:"resize",SLIDE_CLICK:"SLIDE_CLICK",STARTED:"STARTED",TRANSITION_CANCEL:"TRANSITION_CANCEL",TRANSITION_END:"TRANSITION_END",TRANSITION_SKIP:"TRANSITION_SKIP"};r.default=n},{}],40:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return"https:"===location.protocol&&h.default.isDev?e.replace(":"+h.default.localPort,":"+(h.default.localPort+1)):e}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("../utils/style-injector"),s=n(u),l=e("script-injector"),c=n(l),f=e("load-timer"),d=n(f),p=e("resources"),h=n(p),y=e("log"),v=n(y),b=e("error-report"),g=n(b),m=c.default.getInstance(),_=new v.default("DependencyLoader"),w="//imasdk.googleapis.com/js/sdkloader/ima3.js",E=function(){function e(){o(this,e),this.loader=null,this.deferQueue=[]}return a(e,[{key:"loadDependencies",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return this.loader?this.loader.then(t).catch(function(e){return g.default.recordGenericError(_,e)}):(this.loader=this._loadAppDependencies().then(function(){return e._loadAppBundle()}).then(t).then(function(t){return e.loader=null,e.executeDeferredInstructions(),t}).catch(function(e){return g.default.recordGenericError(_,e)}),this.loader)}},{key:"deferExecution",value:function(e,t){this.deferQueue.push({method:e,args:t})}},{key:"executeDeferredInstructions",value:function(){var e=this;this.deferQueue.forEach(function(t){e[t.method].apply(e,t.args)}),this.deferQueue.length=0}},{key:"dispose",value:function(){this.loader=this.deferQueue=null}},{key:"_loadAppDependencies",value:function(){return Promise.all([s.default.inject(i(h.default.APP_CSS),this._getHtmlChildId()),m.inject(w,this._getHtmlChildId(),d.default.loadTypes.IMA_SDK),m.inject(i(h.default.VENDOR_BUNDLE),this._getHtmlChildId(),d.default.loadTypes.VENDOR_BUNDLE)])}},{key:"_loadAppBundle",value:function(){return m.inject(i(h.default.APP_BUNDLE),this._getHtmlChildId(),d.default.loadTypes.APP_BUNDLE)}},{key:"_getHtmlChildId",value:function(){}}]),e}();r.default=E},{"../utils/style-injector":62,"error-report":"error-report","load-timer":"load-timer",log:"log",resources:"resources","script-injector":"script-injector"}],41:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t,r){switch(e){case p.default.SCRIPT:return new window.BPlayer.ScriptTagStrategy(t,r);case p.default.EMBED:return new window.BPlayer.EmbedStrategy(t,r);default:O.default.recordGenericError(T,"Unexpected strategy "+e)}}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=e("./dependency-loader"),f=n(c),d=e("../strategy/StrategyTypes"),p=n(d),h=e("../utils/VisibilityMonitor"),y=n(h),v=e("../events/player-events"),b=n(v),g=e("../events/ad-events"),m=n(g),_=e("log"),w=n(_),E=e("error-report"),O=n(E),S=e("load-timer"),P=n(S),T=new w.default("FacadePlayer"),A=["getId","getPlaylistIndex","getHtmlChildId","setAutoplay","isAutoplay","trackInfo"],k=function(e){function t(e,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;o(this,t);var u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return u.callbacks=r,u.bvp=null,u.player=null,u.strategy=n,u.userOptions=e,u.htmlChildId=u.userOptions&&u.userOptions.htmlChildId,u.assetDetails=a,u.play=u.play.bind(u),u.visibilityMonitor=new y.default,u.on([b.default.PLAY,m.default.AD_STARTED],function(){u.playerStartedPlaying=!0}),A.forEach(function(e){var t=u;u[e]=function(){return t.bvp?t.bvp[e].apply(t.bvp,arguments):void T.warn("Unable to call "+e+" on "+t.htmlChildId+". Please wait until after ready callback has been executed")}}),P.default.trackLoadStart(u.htmlChildId,P.default.loadTypes.PLAYER_INIT),u.setup(),u}return a(t,e),s(t,[{key:"ready",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return this.setup().then(function(t){return e(t),t})}},{key:"play",value:function(){return this.playerStartedPlaying||y.default.isPageVisible()?void(this.bvp?this.bvp.play():this.deferExecution("play",arguments)):void this._registerPlayOnPageActiveEvent()}},{key:"pause",value:function(){this._unregisterPlayOnPageActiveEvent(),this.bvp?this.bvp.pause():this.deferExecution("pause",arguments)}},{key:"on",value:function(){return this.bvp?this.bvp.on.apply(this.bvp,arguments):this.deferExecution("on",arguments),this}},{key:"off",value:function(){return this.bvp?this.bvp.off.apply(this.bvp,arguments):this.deferExecution("off",arguments),this}},{key:"trigger",value:function(){return this.bvp?this.bvp.trigger.apply(this.bvp,arguments):this.deferExecution("trigger",arguments),this}},{key:"setup",value:function(){var e=this;return this.loadDependencies(function(){return e.bvp?e.bvp.ready().then(function(t){return e.player=t,t}):y.default.isPageVisible()?e._createPlayer():new Promise(function(t){e.visibilityMonitor.one(h.EVENTS.VISIBLE,function(){return t(e._createPlayer())})})})}},{key:"dispose",value:function(){this.visibilityMonitor&&(this.visibilityMonitor.dispose(),this.visibilityMonitor=null),this.bvp&&(this.bvp.dispose(),this.bvp=null),this.player=this.userOptions=this.callbacks=this.assetDetails=null,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"_createPlayer",value:function(){var e=this,t=u(this.strategy,this.userOptions,this.assetDetails);return this.bvp=new window.BPlayer.BloombergVideoPlayer(this.userOptions,this.callbacks,t),this.bvp.ready().then(function(t){return e.player=t,t})}},{key:"_registerPlayOnPageActiveEvent",value:function(){this._unregisterPlayOnPageActiveEvent(),this.visibilityMonitor.one(h.EVENTS.VISIBLE,this.play)}},{key:"_unregisterPlayOnPageActiveEvent",value:function(){this.visibilityMonitor.off(h.EVENTS.VISIBLE,this.play)}},{key:"_getHtmlChildId",value:function(){return this.htmlChildId}}]),t}(f.default);r.default=k},{"../events/ad-events":37,"../events/player-events":38,"../strategy/StrategyTypes":52,"../utils/VisibilityMonitor":53,"./dependency-loader":40,"error-report":"error-report","load-timer":"load-timer",log:"log"}],42:[function(e,t,r){"use strict";!function(){function e(){for(var e,t=document.scripts,r=[],n=t.length-1;0<=n;n--){e=t[n];var o=(e.text||e.textContent).trim();e.src&&e.src.match(/bplayer.js/)&&Boolean(o)&&r.push(e)}return r}function t(){var t=e();t.length&&(console&&console.warn&&console.warn("[BPlayer]","You are using deprecated BPlayer initialization, please update!"),t.forEach(function(e){var t=(e.text||e.textContent).trim(),n=new Function("window","container","bmmrAsset","\n          window.containerElement = container;\n          window.bmmrAsset = bmmrAsset;\n\n          "+t);n(r,e,window.bplayerAsset)}))}var r={BPlayer:function(e,t,r){var n=this.bmmrAsset||e;t.containerElement=this.containerElement,window.BPlayer(n,t,r)}};window.BPlayer?t():window.addEventListener("BPlayerLoaded",t)}()},{}],43:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../utils/utils"),u=n(a),s=e("log"),l=n(s),c=e("bvp-shims"),f=new l.default("GoogleTagManager"),d="video",p="video-eng",h="bvpTrackVideo",y="bplayer",v="dataLayer",b=/trackError|record\w*Error|getReducedCallstack|^Error$|promiseReactionJob|native code/,g=/\s*at\s*/,m={PLAY:"play",END:"end",PAUSE:"pause",RESUME:"resume",COMPLETION:"completion",UI_ACTION:"uiaction",LOAD_START:"loadstart",LOAD_END:"loadend",ERROR:"error"},_={GENERIC:"generic",LOAD:"load",HLS:"hls",AD:"ad"},w={bvpEventCategory:d,event:h,mediaPlayer:y+"-"+c.version,bvpEventValue:0},E=void 0,O=!1,S=function(){function e(){o(this,e)}return i(e,null,[{key:"initGTM",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(O=Boolean(e),!O)return void f.info("GoogleTagManager tracking disabled");var r=t||v;E=window[r],E||(f.error("GTM data layer not found: "+r),O=!1)}},{key:"trackError",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.trackDevEvent({bvpEventAction:m.ERROR,bvpEventLabel:e,bvpErrorDetails:t,bvpCallstack:this._getReducedCallstack(),bvpLoaderUrl:r})}},{key:"trackDevEvent",value:function(e){var t=Object.assign({},{bvpEventCategory:p},e);this.trackEvent(t)}},{key:"trackEvent",value:function(e){if(O){var t=Object.assign({},w,this._getExperimentInfo(),e),r=u.default.filterEmptyValues(t);E.push(r)}}},{key:"_getExperimentInfo",value:function(){return{}}},{key:"_getReducedCallstack",value:function(){var e=(new Error).stack;if(!e)return null;var t=e.split(/\r?\n/),r=t.reduce(function(e,t){return b.test(t)||e.push(t.replace(g,"")),e},[]);return r.join("\n")}}]),e}();Object.defineProperties(S,{eventActions:{value:m},errorTypes:{value:_}}),window.BVP_GTM=window.BVP_GTM||S,r.default=S},{"../utils/utils":63,"bvp-shims":"bvp-shims",log:"log"}],44:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},l=e("../../utils/css-helpers"),c=n(l),f=e("../../utils/fullscreen"),d=n(f),p=e("../../utils/event-target"),h=n(p),y=e("../../events/player-events"),v=n(y),b=e("log"),g=n(b),m=e("error-report"),_=n(m),w=new g.default("BaseView"),E="bvp-hidden",O=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.el_=e.createEl(),e.childViews_=[],e.isFullScreen=!1,e}return a(t,e),u(t,[{key:"createEl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=document.createElement(e);return c.default.addClass(o,t),c.default.css(o,n),Object.keys(r).reduce(function(e,t){var n=r[t];return void 0!==e[t]?e[t]=n:e.setAttribute(t,n),e},o),o}},{key:"appendView",value:function(e,r){if(!(e instanceof t))return void _.default.recordGenericError(w,"Cannot append view. Invalid view object:",e);this.childViews_.push(e);var n=(r?this.find(r):this.el_)||this.el_;n.appendChild(e.el())}},{key:"addClass",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.el_;c.default.addClass(t,e)}},{key:"removeClass",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.el_;c.default.removeClass(t,e)}},{key:"find",value:function(e){return this.el_.querySelector(e)}},{key:"findAll",value:function(e){return this.el_.querySelectorAll(e)}},{key:"css",value:function(e){c.default.css(this.el_,e)}},{key:"el",value:function(){return this.el_}},{key:"hide",value:function(){this.addClass(E)}},{key:"show",value:function(){this.removeClass(E)}},{key:"requestFullScreen",value:function(){void 0===this.fullScreenObserverIndex&&(this.fullScreenObserverIndex=t.addFullScreenObserver(this)),d.default.requestFullScreen(this.el_)}},{key:"exitFullScreen",value:function(){void 0===this.fullScreenObserverIndex&&(this.fullScreenObserverIndex=t.addFullScreenObserver(this)),d.default.exitFullScreen()}},{key:"dispose",value:function(){this.el_=null,this.childViews_.forEach(function(e){return e.dispose()}),this.childViews_=null,void 0!==this.fullScreenObserverIndex&&t.removeFullScreenObserver(this.fullScreenObserverIndex),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}}],[{key:"addFullScreenObserver",value:function(e){if(d.default.isSupported())return t.fullScreenObserversCount++,t.fullScreenObservers||(t.fullScreenObservers=[],document.addEventListener(d.default.fullscreenchange,t.onFullScreenChange)),t.fullScreenObservers.push(e)-1}},{key:"removeFullScreenObserver",value:function(e){if(void 0!=e&&d.default.isSupported())return t.fullScreenObserversCount--,t.fullScreenObserversCount<=0?(document.removeEventListener(d.default.fullscreenchange,t.onFullScreenChange),t.fullScreenObservers=null,void(t.fullScreenObserversCount=0)):void(t.fullScreenObservers[e]=null)}},{key:"onFullScreenChange",value:function(e){if(t.fullScreenObservers){for(var r=e.target||d.default.getFullScreenElement(),n=d.default.isInFullScreen(),o=[],i=0,a=t.fullScreenObservers.length;i<a;i++){var u=t.fullScreenObservers[i];u&&(r!==u.el_&&r||(u.isFullScreen=n,u.trigger(v.default.FULL_SCREEN_CHANGE,{fullscreen:n})),u.fullScreenObserverIndex=o.push(u)-1)}t.fullScreenObservers=o}}}]),t}(h.default);Object.defineProperties(O,{fullScreenObservers:{value:null,writable:!0},fullScreenObserversCount:{value:0,writable:!0}}),r.default=O},{"../../events/player-events":38,"../../utils/css-helpers":56,"../../utils/event-target":57,"../../utils/fullscreen":58,"error-report":"error-report",log:"log"}],45:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return e&&e.hasOwnProperty($)&&e[$].disable(),e}function s(e){return e&&e.hasOwnProperty($)&&e[$].enable(),e}function l(){return"bvp_playlist_"+Date.now()}function c(e,t){var r=t();this.removeEventListener(ee,r),e()}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({},e,{htmlChildId:l()},t)}function d(e){e&&e.TitleBar&&e.TitleBar.show()}Object.defineProperty(r,"__esModule",{value:!0});var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),y=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},v=e("../../events/ad-events"),b=n(v),g=e("../../utils/fullscreen"),m=n(g),_=e("../../utils/event-target"),w=n(_),E=e("../../facade/facade-player"),O=n(E),S=e("../../events/player-events"),P=n(S),T=e("../../events/playlist-events"),A=n(T),k=e("./playlist-view"),I=n(k),j=e("./transition-view"),R=n(j),L=e("./up-next-view"),C=n(L),D=e("../../services/personalization-service"),x=n(D),N=e("../../services/geoip-service"),M=n(N),V=e("../../strategy/StrategyTypes"),F=n(V),U=e("../../utils/projector-utils"),B=n(U),G=e("log"),z=n(G),q=e("error-report"),H=n(q),Y=new z.default("PlaylistPlayer"),K=function(){},Q={loadSuggestions:!0,preloadThreshold:10,repeat:!1,startFrom:0,onReady:K,onError:K},$="PlaybackOutro",W=["getSuggestions","onCancelTransition","onFullScreenChange","onSlideClick","onTimeUpdate","onVideoEnd","onVideoPause","onVideoPlay","toggleFullScreen"],J=".bvp-playlist-slide",X="bvp-playlist-slide__preload",Z="next-slide-transition",ee="transitionend",te=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.options=Object.assign({},Q,n),a.bmmrIds={},a.currentItem=a.options.startFrom,a.currentPlayer=null,a.hasRecommendations=!1,a.mayLoadSuggestions=!1,a.personalizationService=new x.default(n.recommendationOptions),a.playlist=[],a.playlistItems=a.playlist.length,a.playlistView=new I.default,a.preloadingNext=!1,a.preloadItem=null,a.preloadPlayer=null,a.transitionView=new R.default,a.upNextView=new C.default,a.geoip=new M.default,a.playlistView.setEventParent(a),a.transitionView.setEventParent(a),a.upNextView.setEventParent(a),W.forEach(function(e){a[e]=a[e].bind(a)}),a.add(r),a.mayLoadSuggestions=1===a.playlistItems,a.transitionView.hide(),a.transitionView.on(A.default.TRANSITION_END,a.playNext.bind(a,!0)).on(A.default.TRANSITION_SKIP,a.playNext.bind(a,!1)).on(A.default.TRANSITION_CANCEL,a.onCancelTransition),a.upNextView.hide(),a.upNextView.on(A.default.SLIDE_CLICK,a.onSlideClick),a.playlistView.appendView(a.upNextView,".bvp-playlist-player__container"),a.playlistView.appendView(a.transitionView,".bvp-playlist-player__container"),a.playlistView.on(P.default.FULL_SCREEN_CHANGE,a.onFullScreenChange);var u=a.playlistView.findAll(J);return a.primarySlide=u[0],a.preloadSlide=u[1],e.appendChild(a.playlistView.el()),a.startPlayback(),a}return a(t,e),h(t,[{key:"add",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Array.isArray(t)?t:[t];r.forEach(function(t){t.id&&!e.bmmrIds[t.id]&&(e.playlist.push(t),t.playlistIndex=e.playlist.length-1,e.bmmrIds[t.id]=1)}),this.playlistItems=this.playlist.length}},{key:"loadVideo",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=f(this.playlist[e],{containerElement:this.primarySlide,height:this.options.height,width:this.options.width});return this.trigger(A.default.ITEM_LOAD,{index:e}),this.currentItem=e,this.currentPlayer=new O.default(n,null,F.default.EMBED),r&&this.currentPlayer.trigger(P.default.CONTINUOUS_PLAY_START),this.currentPlayer.ready().then(u).then(function(e){return e&&(t.setTechStyle(e.techName_),m.default.isSupported()&&(e.requestFullscreen=t.toggleFullScreen,e.isFullscreen_=t.playlistView.isFullScreen),e.on(P.default.ENDED,t.onVideoEnd).on(P.default.TIMEUPDATE,t.onTimeUpdate).on(P.default.PAUSE,t.onVideoPause).on([P.default.PLAY,b.default.AD_STARTED],t.onVideoPlay)),e})}},{key:"preloadNext",value:function(){var e=this,t=this.getNextIndex();if(this.preloadingNext=!0,void 0===t)return void s(this.currentPlayer.player);Y.warn("Preloading next item:",t),this.preloadItem=t;var r=f(this.playlist[t],{containerElement:this.preloadSlide,autoplay:!1,height:this.options.height,preload:"auto",width:this.options.width});return this.trigger(A.default.ITEM_PRELOAD,{index:t}),this.preloadPlayer=new O.default(r,null,F.default.EMBED),this.preloadPlayer.ready().then(u).then(function(t){return t&&m.default.isSupported()&&(t.requestFullscreen=e.toggleFullScreen,t.isFullscreen_=e.playlistView.isFullScreen),t}).catch(function(e){return H.default.recordGenericError(Y,"Unable to preload video",e)})}},{key:"unloadVideo",value:function(){this.trigger(A.default.ITEM_UNLOAD,{index:this.currentItem}),this.preloadingNext=!1,this.upNextView.hide();try{this.currentPlayer.dispose()}catch(e){H.default.recordGenericError(Y,"Failed to dispose a playlist item:",e)}}},{key:"play",value:function(){this.currentPlayer&&this.currentPlayer.play()}},{key:"pause",value:function(){this.currentPlayer&&this.currentPlayer.pause()}},{key:"replay",value:function(){this.playlistItems&&(this.unloadVideo(),this.currentItem=0,this.startPlayback())}},{key:"ready",value:function(e){if(this.currentPlayer)return this.currentPlayer.ready(e)}},{key:"playIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;
e=+e,this.playlistItems&&e>=0&&e<this.playlistItems&&this._forcePlayIndex(e)}},{key:"playId",value:function(e){for(var t,r=0;r<this.playlistItems;r++)if(t=this.playlist[r],t.id===e){this.playIndex(r);break}}},{key:"setAutoplay",value:function(e){e.autoplay=!0}},{key:"startPlayback",value:function(){var e=this;return this.playlistItems?this.loadVideo(this.currentItem).then(function(t){return e.trigger(A.default.STARTED),e.options.onReady(t),t}).then(this.getSuggestions).catch(function(t){e.options.onError(t),H.default.recordGenericError(Y,"Failed to start playback:",t)}):Promise.reject()}},{key:"getCurrentPlayer",value:function(){return this.currentPlayer}},{key:"getNextIndex",value:function(){var e=this.currentItem+1,t=this.playlistItems;return e>=t?this.options.repeat?0:void 0:e}},{key:"getPrevIndex",value:function(){var e=this.currentItem-1,t=0;return e<t?this.options.repeat?this.playlistItems-1:void 0:e}},{key:"getSuggestions",value:function(e){var t=this;if(this.mayLoadSuggestions){var r=function(){var r=t.playlist[0],n=e.options_.metadata.compressedID,o="Video|"+n,i={exclude:o,currentResource:o};return{v:t.geoip.getGeoIpData().then(function(e){return e&&(i.country=e.country,i.region=e.trackingRegion),t.personalizationService.getRecommendations(i,r)}).then(function(e){return t.hasRecommendations=Boolean(e.length),t.add(e),t.upNextView.preloadPosters(t.playlist),e})}}();if("object"===("undefined"==typeof r?"undefined":p(r)))return r.v}return Promise.resolve(this.playlist)}},{key:"transitionToPreloadSlide",value:function(){var e=this;return new Promise(function(t){var r=void 0!==e.preloadSlide.style.transition;if(!r)return void t();var n=c.bind(e.preloadSlide,t,function(){return n});e.preloadSlide.addEventListener(ee,n),e.playlistView.addClass(Z)})}},{key:"trigger",value:function(e,r){this.currentPlayer&&!A.default[e]&&e!==P.default.PAUSE&&e!==P.default.PLAY&&this.currentPlayer.trigger(e,r),y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"trigger",this).call(this,e,r)}},{key:"playNext",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.transitionView.hide(),this.preloadPlayer)return this.preloadPlayer.ready().then(function(){e.trigger(P.default.VIDEO_CHANGE,{newVideoIndex:e.preloadPlayer.getPlaylistIndex()}),e.preloadPlayer.setAutoplay(!0),t&&e.preloadPlayer.trigger(P.default.CONTINUOUS_PLAY_START),e.preloadPlayer.play(),e.transitionToPreloadSlide().then(function(){e.unloadVideo(),e.swapSlides(),e.playlistView.removeClass(Z),e.currentPlayer.on(P.default.ENDED,e.onVideoEnd).on(P.default.TIMEUPDATE,e.onTimeUpdate).on(P.default.PAUSE,e.onVideoPause).on([P.default.PLAY,b.default.AD_STARTED],e.onVideoPlay)})});var r=this.getNextIndex();return void 0===r?void this.onEndOfPlaylist():void this._forcePlayIndex(r,t)}},{key:"playPrevious",value:function(){var e=this.getPrevIndex();return void 0===e?void Y.warn("Reached the beginning of the playlist"):void this._forcePlayIndex(e)}},{key:"swapSlides",value:function(){this.playlistView.removeClass(X,this.preloadSlide),this.playlistView.addClass(X,this.primarySlide);var e=this.primarySlide,t=this.preloadSlide;this.primarySlide=t,this.preloadSlide=e,this.currentPlayer=this.preloadPlayer,this.currentItem=this.preloadItem,this.currentPlayer.player&&(this.currentPlayer.player.isFullscreen_=this.playlistView.isFullScreen),this.preloadPlayer=this.preloadItem=e=t=null}},{key:"setTechStyle",value:function(e){var t=B.default.isMobile()?"-mobile":"";this.playlistView.addClass(("vjs-tech-"+e+t).toLowerCase())}},{key:"toggleFullScreen",value:function(){this.playlistView.isFullScreen?this.playlistView.exitFullScreen():this.playlistView.requestFullScreen()}},{key:"onFullScreenChange",value:function(e){this.currentPlayer.player.isFullscreen_=e.detail.fullscreen,this.currentPlayer.player.trigger(P.default.FULL_SCREEN_CHANGE)}},{key:"onEndOfPlaylist",value:function(){Y.warn("End of playlist reached"),this.trigger(A.default.ALL_ITEMS_PLAYED)}},{key:"onVideoEnd",value:function(e){var t=this;if(e.target!==document){if(this.preloadingNext=!1,!this.hasRecommendations&&!this.options.repeat)return void this.onEndOfPlaylist();this.preloadPlayer&&this.preloadPlayer.ready().then(function(e){return e?(t.transitionView.setTitle(e.options_.title),void t.transitionView.setPoster(e.options_.posterUrl)):void H.default.recordGenericError(Y,"Unable to get preload player")}),this.transitionView.show()}}},{key:"onTimeUpdate",value:function(){var e=this.currentPlayer.player.currentTime(),t=this.currentPlayer.player.duration(),r=t-e;r&&r<this.options.preloadThreshold&&!this.preloadingNext&&this.preloadNext()}},{key:"onVideoPause",value:function(){if(!this.currentPlayer.player.ended()){var e=this.currentItem+1,t=this.playlist.slice(e,e+2);this.hasRecommendations=Boolean(t.length),this.hasRecommendations&&(this.upNextView.createSlidesFor(t),this.upNextView.show()),this.trigger(P.default.PAUSE,{player:this.currentPlayer.player})}}},{key:"onVideoPlay",value:function(){this.hasRecommendations&&this.upNextView.hide(),this.trigger(P.default.PLAY,{player:this.currentPlayer.player})}},{key:"onCancelTransition",value:function(){d(this.currentPlayer.player),this.transitionView.hide(),this.upNextView.show()}},{key:"onSlideClick",value:function(e){var t=e.detail.id;this.playId(t)}},{key:"dispose",value:function(){this.unloadVideo(),this.removeAllEventListeners(),this.playlistView.dispose(),this.currentPlayer=this.preloadPlayer=this.options=this.playlist=null,this.playlistView=this.upNextView=this.transitionView=this.primarySlide=this.preloadSlide=null,y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"_forcePlayIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.trigger(P.default.VIDEO_CHANGE,{newVideoIndex:e}),this.unloadVideo();var r=this.playlist[e];this.setAutoplay(r),this.loadVideo(e,t)}}]),t}(w.default);r.default=te},{"../../events/ad-events":37,"../../events/player-events":38,"../../events/playlist-events":39,"../../facade/facade-player":41,"../../services/geoip-service":50,"../../services/personalization-service":51,"../../strategy/StrategyTypes":52,"../../utils/event-target":57,"../../utils/fullscreen":58,"../../utils/projector-utils":59,"./playlist-view":46,"./transition-view":47,"./up-next-view":48,"error-report":"error-report",log:"log"}],46:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},l=e("./base-view"),c=n(l),f=e("../../utils/resize-monitor"),d=n(f),p=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.resizeMonitor=new d.default(e.el_),e.resizeMonitor.setEventParent(e),e}return a(t,e),u(t,[{key:"createEl",value:function(){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div","bvp-playlist-player",{"data-breakpoints":"300 640 800",innerHTML:'\n    <div class="bvp-playlist-player__container">\n       <div class="bvp-playlist-slide"></div>\n       <div class="bvp-playlist-slide bvp-playlist-slide__preload"></div>\n    </div>\n    '})}},{key:"dispose",value:function(){this.resizeMonitor.dispose(),this.resizeMonitor=null,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}}]),t}(c.default);r.default=p},{"../../utils/resize-monitor":61,"./base-view":44}],47:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},l=e("./base-view"),c=n(l),f=e("../../events/playlist-events"),d=n(f),p=["onTransitionEnd","onCancel","onPlay"],h=5e3,y="click",v=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return p.forEach(function(t){e[t]=e[t].bind(e)}),e.animationTimerId=null,e.title=e.find(".bvp-playback-transition__title"),e.countdown=e.find(".autoplay-countdown"),e.cancelButton=e.find(".bvp-playback-transition__cancel"),e.playButton=e.find(".bvp-playback-transition__countdown"),e.cancelButton.addEventListener(y,e.onCancel),e.playButton.addEventListener(y,e.onPlay),e}return a(t,e),u(t,[{key:"createEl",value:function(){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div","bvp-playback-transition",{innerHTML:'\n        <div class="bvp-playback-transition__container">\n            <div class="bvp-playback-transition__title"></div>\n            <div class="bvp-playback-transition__buttons"> \n                <div class="bvp-playback-transition__countdown" role="button">\n                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 97 97">\n                      <circle class="autoplay-countdown" fill="none" stroke="#fff" stroke-width="4" transform="translate(48.5 48.5)rotate(-90)translate(-48.5 -48.5)" cx="48.5" cy="48.5" r="46" />\n                      <path d="M37 34.5V62.5l25-13.1Z" fill="#fff"/>\n                  </svg>\n                </div>\n                <button class="bvp-playback-transition__cancel"></button>\n            </div>\n        </div>\n        '.trim()})}},{key:"animateTransition",value:function(){var e=this;this.animationTimerId=setTimeout(function(){e.onTransitionEnd()},h)}},{key:"cancelTransition",value:function(){window.clearTimeout(this.animationTimerId),this.animationTimerId=null}},{key:"show",value:function(){this.animateTransition(),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this)}},{key:"setTitle",value:function(e){this.title.textContent=e}},{key:"setPoster",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.css({"background-image":"url("+e+")"})}},{key:"onCancel",value:function(){this.cancelTransition(),this.trigger(d.default.TRANSITION_CANCEL)}},{key:"onPlay",value:function(){this.cancelTransition(),this.trigger(d.default.TRANSITION_SKIP)}},{key:"onTransitionEnd",value:function(){this.trigger(d.default.TRANSITION_END)}},{key:"dispose",value:function(){this.cancelTransition(),this.cancelButton.removeEventListener(y,this.onCancel),this.playButton.removeEventListener(y,this.onPlay),this.title=this.countdown=this.cancelButton=this.playButton=null,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}}]),t}(c.default);r.default=v},{"../../events/playlist-events":39,"./base-view":44}],48:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=e("./base-view"),f=n(c),d=e("../../utils/css-helpers"),p=n(d),h=e("../../events/playlist-events"),y=n(h),v=e("../projector-settings-js/poster-size"),b=n(v),g="bvp-up-next__slide",m="bvp-up-next__slide-title",_="data-bmmr-id",w="data-playlist-index",E="click",O=2,S=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onSlideClick=e.onSlideClick.bind(e),e.container=e.find(".bvp-up-next__container"),e.container.addEventListener(E,e.onSlideClick),e}return u(t,e),s(t,[{key:"createEl",value:function(){return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div","bvp-up-next",{innerHTML:'<div class="bvp-up-next__container"></div>'})}},{key:"clearSlides",value:function(){this.container.innerHTML=""}},{key:"createSlide",value:function(e){var r;return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",g,(r={innerHTML:'<span class="bvp-up-next__slide-title">'+(e.title||"")+"</span>"},o(r,_,e.id),o(r,w,e.playlistIndex),r),{"background-image":"url('"+this._getSmallPosterUrl(e.poster)+"')"})}},{key:"createSlidesFor",value:function(e){var t=this,r=e.slice(0,2);this.clearSlides(),r.forEach(function(e,r){var n=t.createSlide(e);0===r&&p.default.addClass(n,"first"),t.container.appendChild(n)})}},{key:"preloadPosters",value:function(e){for(var r=Math.min(e.length,O),n=0;n<r;n++){var o=e[n],i=this._getSmallPosterUrl(o.poster);if(!i)return;var a=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"link",null,{rel:"prefetch",href:i});this.container.appendChild(a)}}},{key:"onSlideClick",value:function(e){var t=void 0,r=void 0;return p.default.hasClass(e.target,g)?(t=e.target.getAttribute(_),r=e.target.getAttribute(w),void this.trigger(y.default.SLIDE_CLICK,{id:t,playlistIndex:r})):void(p.default.hasClass(e.target,m)&&(t=e.target.parentElement.getAttribute(_),r=e.target.getAttribute(w),this.trigger(y.default.SLIDE_CLICK,{id:t,playlistIndex:r})))}},{key:"dispose",value:function(){this.container.removeEventListener(E,this.onSlideClick),this.container=null,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"_getSmallPosterUrl",value:function(e){return b.default.closestImage(1,1,e)}}]),t}(f.default);r.default=S},{"../../events/playlist-events":39,"../../utils/css-helpers":56,"../projector-settings-js/poster-size":49,"./base-view":44}],49:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("log"),u=n(a),s=e("array-find-index"),l=n(s),c=new u.default("PosterSize"),f=[{width:320,height:180},{width:640,height:360},{width:960,height:540}],d=/(.*)-1x-1\.(.*)/,p=.5625,h=function(){function e(){o(this,e)}return i(e,null,[{key:"isTemplateImage",value:function(e){return d.test(e)}},{key:"closestImage",value:function(t,r,n){if(!e.isTemplateImage(n))return c.warn("Cannot resize: Invalid template image",n),n;if(t=parseFloat(t),r=parseFloat(r),t<=0)return c.warn("Cannot resize: Invalid container size",t,r),n;r<=0&&(r=t*p);var o=(0,l.default)(f,function(e){return e.width>=t&&e.height>=r});o===-1&&(o=f.length-1);var i=f[o];return n.replace(d,"$1"+i.width+"x"+i.height+".$2")}}]),e}();r.default=h},{"array-find-index":1,log:"log"}],50:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("resources"),u=n(a),s=e("error-report"),l=n(s),c=e("log"),f=n(c),d=new f.default("GeoIpService"),p=""+u.default.GEOIP_API,h=function(){function e(){o(this,e)}return i(e,[{key:"getGeoIpData",value:function(){return fetch(p,{method:"GET",mode:"cors"}).then(function(e){var t=e.headers.get("content-type");if(e.ok&&t&&t.indexOf("application/json")!==-1)return e.json();throw new Error("GeoIP returned an invalid response")}).catch(function(e){l.default.recordLoadError(d,p,"Error fetching geoip data: ",e)})}}]),e}();r.default=h},{"error-report":"error-report",log:"log",resources:"resources"}],51:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../utils/cookies"),u=n(a),s=e("../utils/query-string"),l=n(s),c=e("resources"),f=n(c),d=e("log"),p=n(d),h=e("error-report"),y=n(h),v=new p.default("PersonalizationService"),b="agent_id",g="_breg-uid",m="exp_pref",_="session_id",w="session_key",E=f.default.PERSONALIZATION_API+"/user/recommendations/meta/",O={backfillFacets:"Video|All",country:"US",decayCoefficient:1,inactivePeriod:2592e6,interactionsLimit:1,limit:10,maxAge:6048e5,region:"US",rescorers:"random;epx","rescorers.epx.minimumScore":.1,"rescorers.random.minimumScore":.1,resourceTypes:"Video",thumbnailRequired:!0},S={autoplay:!0,techOrder:["html5","flash"]},P=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var r=u.default.get(b),n=u.default.get(m),i=u.default.get(g),a=u.default.get(_),s=u.default.get(w),l=60*(new Date).getTimezoneOffset()*1e3;this.options=Object.assign({},O,t),r&&(this.options[b]=r),n&&(this.options[m]=n),i&&(this.options.breg=i),a&&(this.options[_]=a),s&&(this.options[w]=s),this.options.timezoneOffset=l}return i(e,[{key:"getRecommendations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},this.options,t),o=E+"?"+l.default.toQueryString(n);return fetch(o,{mode:"cors"}).then(function(e){return e.json()}).then(function(t){return e.formatRecommendations(t,r)}).catch(function(e){y.default.recordLoadError(v,o,"Error fetching personalization data:",e)})}}],[{key:"formatRecommendations",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S;return e.map(function(e){var r={title:e.headline,poster:e.thumbnailUrl,id:e.assetID,share_metadata:{canonical_url:e.url}};return Object.assign({},t,r)})}}]),e}();r.default=P},{"../utils/cookies":55,"../utils/query-string":60,"error-report":"error-report",log:"log",resources:"resources"}],52:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={EMBED:"embed",SCRIPT:"script"};r.default=n},{}],53:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0}),r.EVENTS=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},l=e("./event-target"),c=n(l),f={VISIBLE:"VISIBLE",INVISIBLE:"INVISIBLE"},d={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"},p=void 0,h=void 0,y=!1;for(var v in d)if("undefined"!=typeof document[v]){p=v,h=d[v],y=!0;break}var b=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return t._isVisibilityAPISupported()&&(e._onVisibilityChange=e._onVisibilityChange.bind(e),document.addEventListener(h,e._onVisibilityChange)),e}return a(t,e),u(t,[{key:"dispose",value:function(){t._isVisibilityAPISupported()&&document.removeEventListener(h,this._onVisibilityChange),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"_onVisibilityChange",value:function(){var e=t.isPageVisible()?f.VISIBLE:f.INVISIBLE;this.trigger(e)}}],[{key:"isPageVisible",value:function(){return!document[p]}},{key:"_isVisibilityAPISupported",value:function(){return y}}]),t}(c.default);r.EVENTS=f,r.default=b},{"./event-target":57}],54:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return u.default.isDate(e)&&!isNaN(e.getTime())}function i(e){e=e||s;var t=new Date;if(t.setTime(t.getTime()+e),t&&!o(t))throw new Error("Invalid expires parameter");return t}Object.defineProperty(r,"__esModule",{value:!0});var a=e("./utils"),u=n(a),s=7776e6,l={stringInGMT:function(e){var t=i(e);return t.toGMTString()},totalMilliseconds:function(e){var t=i(e);return t.getTime()}};r.default=l},{"./utils":63}],55:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("escape-string-regexp"),u=n(a),s=e("./cookie-expiration-date"),l=n(s),c="/",f=!1,d="",p=function(){function e(){o(this,e)}return i(e,[{key:"get",value:function(e){var t=new RegExp("[; ]"+(0,u.default)(e)+"=([^\\s;]*)"),r=document.cookie.match(t);return e&&r?decodeURI(r[1]):void 0}},{key:"set",value:function(e,t,r,n){var o=this.getCookieOptions(n||{});t=r?encodeURIComponent(t):t,document.cookie=this.generateCookieString(e,t,o)}},{key:"remove",value:function(e,t){var r=this.getCookieOptions(t||{});r.expires=new Date(-1).toGMTString(),this.set(e,"",!1,r)}},{key:"generateCookieString",value:function(e,t,r){var n=e+"="+t;return n+=";path="+r.path,n+=";domain="+r.domain,n+=r.expires?";expires="+r.expires:"",n+=r.secure?";secure":""}},{key:"getCookieOptions",value:function(e){e=e||{};var t=e&&e.expires?e.expires:null;return{path:e&&e.path?e.path:c,domain:d,expires:l.default.stringInGMT(t),secure:void 0!==e.secure?e.secure:f}}}]),e}();r.default=new p},{"./cookie-expiration-date":54,"escape-string-regexp":29}],56:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=e.length,n=0;n<r;n++)if(t===e[n])return n;return-1}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./utils"),s=n(u),l=/\s+/,c=" ",f=["-webkit-","-moz-","-ms-","-o-"],d=function(){function e(){o(this,e)}return a(e,null,[{key:"addClass",value:function(e,t){if(!e||!t)return this;if(e.classList)return e.classList.add(t),this;var r=e.className?e.className.trim().split(l):[];return i(r,t)!==-1?this:(e.className=r.concat([t]).join(c),this)}},{key:"addClassList",value:function(t,r){return s.default.isArray(r)&&r.forEach(function(r){e.addClass(t,r)}),this}},{key:"removeClass",value:function(e,t){if(!e)return this;if(e.classList)return e.classList.remove(t),this;var r=e.className?e.className.trim().split(l):[],n=i(r,t);return n===-1?this:(r.splice(n,1),e.className=r.join(c),this)}},{key:"hasClass",value:function(e,t){if(e){if(e.classList)return e.classList.contains(t);var r=e.className.trim().split(l);return i(r,t)!==-1}}},{key:"css",value:function(e,t){if("string"==typeof t)return void(e.style.cssText=t);var r=Object.keys(t).map(function(e){var r=e.toLowerCase(),n=t[e];return r+": "+n+";"}).join("");r&&(e.style.cssText=r)}},{key:"computedStylesFor",value:function(e){return document.defaultView.getComputedStyle(e,"")}},{key:"transform",value:function(e,t){if(e){var r="transform";if(!(r in e.style))for(var n,o=0,i=f.length;o<i&&(n=f[o],r=n+r,!(r in e.style));o++);e.style[r]=t}}}]),e}();r.default=d},{"./utils":63}],57:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,r){e&&t.bubbles&&!t.defaultPrevented&&(t.originalTarget||Object.defineProperty(t,"originalTarget",{value:r}),e.dispatchEvent(t))}function i(e,t){return a(e)&&t&&"function"==typeof t}function a(e){return e&&"string"==typeof e}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=/\s*,\s*/g,l=Symbol("listeners"),c=Symbol("parent"),f=function(){function e(){n(this,e),this[l]={},this[c]=null}return u(e,[{key:"addEventListener",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i(e,t)&&(this[l][e]||(this[l][e]=[]),this[l][e].push({callback:t,deRegister:r}))}},{key:"removeEventListener",value:function(e,t){if(i(e,t)){var r=this[l][e];if(r){if(!t)return void(r.length=0);for(var n=0,o=r.length;n<o;n++)if(r[n].callback===t)return r.splice(n,1),this.removeEventListener(e,t)}}}},{key:"removeAllEventListeners",value:function(){var e=this;Object.keys(this[l]).forEach(function(t){e[l][t].length=0})}},{key:"dispatchEvent",value:function(e){var t=this,r=e.type;if(this[l].hasOwnProperty(r)){var n=this[l][r],i=[];this._overrideEventTarget(e);for(var a=0,u=n.length;a<u;a++){var s=n[a].callback,f=n[a].deRegister;s.call(this,e),f&&i.push(s)}i.forEach(function(e){return t.removeEventListener(r,e)})}o(this[c],e,this)}},{key:"setEventParent",value:function(t){t instanceof e&&(this[c]=t)}},{key:"on",value:function(e,t){var r=this;if(!i(e,t))return this;var n=e.split(s);return n.forEach(function(e){r.addEventListener(e,t)}),this}},{key:"one",value:function(e,t){var r=this;if(!i(e,t))return this;var n=e.split(s);return n.forEach(function(e){r.addEventListener(e,t,!0)}),this}},{key:"off",value:function(e,t){var r=this;if(!i(e,t))return this;var n=e.split(s);return n.forEach(function(e){r.removeEventListener(e,t)}),this}},{key:"trigger",value:function(e,t){if(!a(e))return this;var r=new CustomEvent(e,{detail:t,bubbles:!0,originalTarget:this,target:this});return this.dispatchEvent(r),this}},{key:"dispose",value:function(){this.removeAllEventListeners(),this[l]=null,this[c]=null}},{key:"_overrideEventTarget",value:function(e){Object.defineProperty(e,"target",{value:this,configurable:!0})}}]),e}();r.default=f},{}],58:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){return void 0!==document.fullscreenEnabled?"default":void 0!==document.webkitFullscreenEnabled?"webkit":void 0!==document.mozFullScreenEnabled?"moz":void 0!==document.msFullscreenEnabled?"ms":void 0}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a={webkit:{element:"webkitFullscreenElement",enabled:"webkitFullscreenEnabled",exit:"webkitExitFullscreen",onchange:"webkitfullscreenchange",onerror:"webkitfullscreenerror",request:"webkitRequestFullscreen",status:"webkitIsFullScreen"},moz:{element:"mozFullScreenElement",enabled:"mozFullScreenEnabled",exit:"mozCancelFullScreen",onchange:"mozfullscreenchange",onerror:"mozfullscreenerror",request:"mozRequestFullScreen",status:"mozFullScreen"},ms:{element:"msFullscreenElement",enabled:"msFullscreenEnabled",exit:"msExitFullscreen",onchange:"MSfullscreenchange",onerror:"MSfullscreenerror",request:"msRequestFullscreen",status:"msFullscreen"},default:{element:"fullscreenElement",enabled:"fullscreenEnabled",exit:"exitFullscreen",onchange:"fullscreenchange",onerror:"fullscreenerror",request:"requestFullscreen",status:"fullscreen"}},u=o(),s=void 0!==u,l=function(){function e(){n(this,e)}return i(e,null,[{key:"requestFullScreen",value:function(e){if(s){var t=a[u].request;e[t]()}}},{key:"exitFullScreen",value:function(){if(s){var e=a[u].exit;this._getDocumentProperty(e)()}}},{key:"isEnabled",value:function(){if(!s)return!1;var e=a[u].enabled;return this._getDocumentProperty(e)}},{key:"isSupported",value:function(){return s}},{key:"isInFullScreen",value:function(){if(s){var e=a[u].status;return this._getDocumentProperty(e)}}},{key:"getFullScreenElement",value:function(){if(s){var e=a[u].element;return this._getDocumentProperty(e)}}},{key:"getVendorPrefix",value:function(){
return u}},{key:"_getDocumentProperty",value:function(e){return document[e]}}]),e}();Object.assign(l,{vendorMap:a,fullscreenchange:s&&a[u].onchange,fullscreenerror:s&&a[u].onerror}),r.default=l},{}],59:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){try{return new ActiveXObject(e)}catch(e){return!1}}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a="$version",u=/Firefox\//,s=/CriOS/,l="mini",c=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i,f=/[\d]+/g,d="ShockwaveFlash.ShockwaveFlash",p="ShockwaveFlash.ShockwaveFlash.6",h="ShockwaveFlash.ShockwaveFlash.7",y="Shockwave Flash",v="Shockwave Flash 2.0",b="application/x-shockwave-flash",g="",m=function(){function e(){n(this,e)}return i(e,null,[{key:"forcedToPlayFlash",value:function(t){var r=t&&Array.isArray(t.techOrder)&&t.techOrder[0];return!(e.isMobile()||!r||"flash"!==r)&&Boolean(e.getFlashVersion())}},{key:"getFlashVersion",value:function(){var t=void 0;return navigator.plugins&&navigator.plugins.length?(t=navigator.plugins[y])?e.parseFlashVersion(t.description):(t=navigator.plugins[v],t?"2.0.0.11":g):navigator.mimeTypes&&navigator.mimeTypes.length?(t=navigator.mimeTypes[b],t&&t.enabledPlugin?e.parseFlashVersion(t.enabledPlugin.description):g):(t=o(h))?e.parseFlashVersion(t.GetVariable(a)):o(p)?"6.0.21":(t=o(d))?e.parseFlashVersion(t.GetVariable(a)):g}},{key:"isHlsSupported",value:function(){return!!e.isMobile()||Hls.isSupported()}},{key:"isMiniPlayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.playerType===l}},{key:"isMobile",value:function(){return c.test(this.userAgent())}},{key:"isSafariDesktop",value:function(){var e=this.userAgent().toLocaleLowerCase();return e.indexOf("safari")!==-1&&e.indexOf("chrome")===-1}},{key:"isFirefox",value:function(){return u.test(this.userAgent())}},{key:"isChromeIos",value:function(){return s.test(navigator.userAgent)}},{key:"parseFlashVersion",value:function(e){return e=e.match(f),e.slice(0,3).join(".")}},{key:"userAgent",value:function(){return navigator.userAgent}}]),e}();r.default=m},{}],60:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=/([^?=&]+)(=([^&]*))?/g,a=function(){function e(){n(this,e)}return o(e,null,[{key:"toQueryString",value:function(e){return Object.keys(e).reduce(function(t,r,n){return""+t+(n>0?"&":"")+encodeURIComponent(r)+"="+encodeURIComponent(e[r])},"")}},{key:"parseQueryString",value:function(e){if(!e||"string"!=typeof e)return{};var t={};return e.replace(i,function(e,r,n,o){var i=decodeURIComponent(r),a=void 0!==o?decodeURIComponent(o).replace("+"," "):void 0;return t.hasOwnProperty(i)?Array.isArray(t[i])?t[i].push(a):void(t[i]=[t[i],a]):void(t[i]=a)}),Object.freeze(t)}}]),e}();r.default=a},{}],61:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},l=e("./event-target"),c=n(l),f=/\d+/g,d="data-breakpoints",p=["onResize","monitor"],h="resize",y=function(e){function t(e){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.el_=e,r.monitorId_=null,p.forEach(function(e){r[e]=r[e].bind(r)}),r.width=null,r.wBreakpoints_=[],r.setupBreakpoints(),r.monitor(),r}return a(t,e),u(t,[{key:"setupBreakpoints",value:function(){var e=this.el_.getAttribute(d);if(e){var t=e.match(f)||[];t=t.map(function(e){return parseFloat(e)}),this.wBreakpoints_=this.wBreakpoints_.concat(t).sort()}}},{key:"getMinWidth",value:function(e){for(var t=this.wBreakpoints_.length-1;0<=t;t--){var r=this.wBreakpoints_[t];if(e>=r)return r}return 0}},{key:"monitor",value:function(){var e=this;this.monitorId_=window.requestAnimationFrame(function(){var t=e.el_.clientWidth;if(e.width!==t){var r=e.getMinWidth(t);e.width=t,e.el_.setAttribute("min-width",r),e.onResize()}e.monitor()})}},{key:"stopMonitoring",value:function(){window.cancelAnimationFrame(this.monitorId_),this.monitorId_=null}},{key:"onResize",value:function(){var e=this.el_.getBoundingClientRect();this.trigger(h,{dimensions:e})}},{key:"dispose",value:function(){this.el_=this.width=this.wBreakpoints_=null,this.stopMonitoring(),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}}]),t}(c.default);r.default=y},{"./event-target":57}],62:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){var e=document.createElement("link");return e.setAttribute("data-version",a.version),e.setAttribute("id",h),e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e}function i(){return Boolean(document.getElementById(h))}Object.defineProperty(r,"__esModule",{value:!0});var a=e("bvp-shims"),u=e("log"),s=n(u),l=e("load-timer"),c=n(l),f=e("error-report"),d=n(f),p=new s.default("StyleInjector"),h="_bvpStyle",y="Link could not be loaded",v="error",b="complete",g={inject:function(e,t){var r=document.getElementsByTagName("head")[0];return i()?Promise.resolve():new Promise(function(n,i){c.default.trackLoadStart(t,c.default.loadTypes.CSS_FILE,e);var a=o();void 0!==a.onreadystatechange?a.onreadystatechange=function(){if(b===this.readyState){var r="hidden"===this.currentStyle.visibility;r?(c.default.trackLoadComplete(t,c.default.loadTypes.CSS_FILE,c.default.loadStatus.COMPLETE),n()):(c.default.trackLoadComplete(t,c.default.loadTypes.CSS_FILE,c.default.loadStatus.ERROR),d.default.recordLoadError(p,e,"Error loading "+e),i(y)),a.onreadystatechange=a=null}}:a.onload=a.onerror=function(r){v===r.type?(c.default.trackLoadComplete(t,c.default.loadTypes.CSS_FILE,c.default.loadStatus.ERROR),d.default.recordLoadError(p,e,"Could not load style "+e),i(y)):(c.default.trackLoadComplete(t,c.default.loadTypes.CSS_FILE,c.default.loadStatus.COMPLETE),n()),a.onload=a.onerror=a=null},a.href=e,r.appendChild(a)})}};r.default=g},{"bvp-shims":"bvp-shims","error-report":"error-report","load-timer":"load-timer",log:"log"}],63:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return Object.prototype.toString.call(e)}Object.defineProperty(r,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("lodash.clonedeep"),l=n(s),c="object",f="[object Object]",d="[object Array]",p="[object String]",h="[object Date]",y=function(){function e(){o(this,e)}return u(e,null,[{key:"isArray",value:function(e){return i(e)===d}},{key:"isObject",value:function(e){return e&&("undefined"==typeof e?"undefined":a(e))===c}},{key:"isPlainObject",value:function(e){return i(e)===f}},{key:"isString",value:function(e){return i(e)===p}},{key:"isDate",value:function(e){return i(e)===h}},{key:"isEmptyObject",value:function(t){if(!e.isPlainObject(t))return!0;for(var r in t)if(t.hasOwnProperty(r))return!1;return!0}},{key:"deepMerge",value:function(e,t){if(!e)return JSON.parse(JSON.stringify(t));if(!t)return JSON.parse(JSON.stringify(e));var r=(0,l.default)(e);e.streams&&(r.streams=e.streams);for(var n in t)t.hasOwnProperty(n)&&(n in r&&"object"===a(r[n])?r[n]=this.deepMerge(r[n],t[n]):r[n]=t[n]);return r}},{key:"filterEmptyValues",value:function(t){return e.isPlainObject(t)?Object.keys(t).reduce(function(r,n){var o=t[n];return e.isString(o)?""!==o.trim()&&(r[n]=o):"boolean"==typeof o||"number"==typeof o?r[n]=o:o&&(r[n]=o),r},{}):t}}]),e}();r.default=y},{"lodash.clonedeep":30}],64:[function(e,t,r){"use strict";!function(){return"function"!=typeof Array.isArray&&void(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)})}()},{}],65:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){if("function"==typeof window.CustomEvent)return!1;var e=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{bubbles:!1,cancelable:!1,detail:void 0};n(this,e);var o=document.createEvent("CustomEvent");return o.initCustomEvent(t,r.bubbles,r.cancelable,r.detail),o};e.prototype=window.Event.prototype,window.CustomEvent=e}()},{}],66:[function(e,t,r){"use strict";e("./symbol"),e("./array/is-array"),e("./object/assign"),e("./promise"),e("whatwg-fetch"),e("./request-animation-frame"),e("./custom-event"),e("./url")},{"./array/is-array":64,"./custom-event":65,"./object/assign":67,"./promise":68,"./request-animation-frame":69,"./symbol":70,"./url":72,"whatwg-fetch":35}],67:[function(e,t,r){"use strict";e("es6-object-assign").polyfill()},{"es6-object-assign":22}],68:[function(e,t,r){"use strict";e("es6-promise").polyfill()},{"es6-promise":23}],69:[function(e,t,r){"use strict";!function(){for(var e=0,t=["ms","moz","webkit","o"],r=0;r<t.length&&!window.requestAnimationFrame;++r)window.requestAnimationFrame=window[t[r]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[r]+"CancelAnimationFrame"]||window[t[r]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var r=(new Date).getTime(),n=Math.max(0,16-(r-e)),o=window.setTimeout(function(){t(r+n)},n);return e=r+n,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}()},{}],70:[function(e,t,r){"use strict";e("es6-symbol/implement")},{"es6-symbol/implement":24}],71:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../js/utils/query-string"),u=n(a),s=function(){function e(t){o(this,e),this.params=u.default.parseQueryString(t)}return i(e,[{key:"get",value:function(e){if(this.has(e))return Array.isArray(this.params[e])?this.params[e][0]:this.params[e]}},{key:"getAll",value:function(e){return this.has(e)?Array.isArray(this.params[e])?this.params[e]:[this.params[e]]:[]}},{key:"has",value:function(e){return this.params.hasOwnProperty(e)}}]),e}();r.default=s},{"../js/utils/query-string":60}],72:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=e("./url-search-params"),a=n(i);!function(){if("function"==typeof window.URL&&window.URL.length>0)return!1;var e=function e(t){o(this,e);var r=document.createElement("a");r.href=t;var n=r,i=n.protocol,u=n.hostname,s=n.port,l=n.pathname,c=n.search,f=n.hash,d=n.host;return r=null,Object.freeze({protocol:i,hostname:u,port:s,pathname:l,search:c,hash:f,host:d,searchParams:new a.default(c)})};window.URL&&window.URL.createObjectURL&&(e.createObjectURL=window.URL.createObjectURL),window.URL&&window.URL.revokeObjectURL&&(e.revokeObjectURL=window.URL.revokeObjectURL),window.URL=e}()},{"./url-search-params":71}],"bvp-constant":[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.TRITON_PROVIDER_NAME="TRITON",r.MPEG_STREAM_TYPE="application/x-mpegURL",r.CURRENT_STREAM_NOT_FOUND="error_current_stream_not_found"},{}],"bvp-experiment":[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("bb.experiment"),o=new n({});o.initialize(),r.default=o},{"bb.experiment":3}],"bvp-shims":[function(e,t,r){"use strict";t.exports={version:"v0.11.74",assetRoot:"cdn.gotraffic.net/projector/v0.11.74",latestRoot:"cdn.gotraffic.net/projector/latest"}},{}],"error-report":[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return e.reduce(function(e,t){return e+" "+i(t)},"").trim()}function i(e){return e&&e.message?e.message:String(e)}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=window.BVP_GTM,s=function(){function e(){n(this,e)}return a(e,null,[{key:"recordGenericError",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=o(r);e.error.apply(e,r),u.trackError(u.errorTypes.GENERIC,e.label+": "+i)}},{key:"recordHLSError",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=o(r);e.error.apply(e,r),u.trackError(u.errorTypes.HLS,e.label+": "+i)}},{key:"recordLoadError",value:function(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];var a=o(n);e.error.apply(e,n),u.trackError(u.errorTypes.LOAD,e.label+": "+a,t)}},{key:"recordAdError",value:function(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];var a=o(n);e.error.apply(e,n),u.trackError(u.errorTypes.AD,e.label+": "+a,t)}}]),e}();r.default=s},{}],"load-timer":[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){y={},v={}}function a(e){return v[e]}Object.defineProperty(r,"__esModule",{value:!0}),r.getInitTime=r.reset=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("log"),l=n(s),c=e("error-report"),f=n(c),d=new l.default("LoadTimer"),p={PLAYER_INIT:"playerinit",APP_BUNDLE:"appbundle",VENDOR_BUNDLE:"vendorbundle",TRITON_ID_SYNC:"tritonidsync",TRITON_PROVISION_API:"tritonprovisionapi",CSS_FILE:"cssfile",IMA_SDK:"imasdk",CONFIG:"config",CEDEXIS:"cedexis",PRE_ROLL:"preroll",BMMR:"bmmr"},h={COMPLETE:"COMPLETE",ERROR:"ERROR",INVALID_COMPLETE:"INVALID_COMPLETE",INVALID_ERROR:"INVALID_ERROR"},y={},v={},b=function(){function e(){o(this,e)}return u(e,null,[{key:"trackLoadStart",value:function(e,t,r){var n=Date.now();if(t===p.PLAYER_INIT&&(y[e]&&f.default.recordGenericError(d,"Attempting to track a second load for "+e+" after a load for this player has already been tracked"),y[e]={},v[e]=n),y[e]||(f.default.recordGenericError(d,"Attempting to track a "+t+" start for "+e+" before an init time has been set"),y[e]={},v[e]=n),y[e][t]){var o=y[e][t].loadStatus?"Attempting to track load start for "+t+" on "+e+" after the load has completed":"Attempting to track load start for "+t+" on "+e+" after a load start exists";return void f.default.recordGenericError(d,o)}y[e][t]={startDeltaTime:n-v[e],startTime:n,url:r}}},{key:"trackLoadComplete",value:function(e,t,r){y[e]&&y[e][t]||(f.default.recordGenericError(d,"Attempting to complete "+t+" on "+e+" which has not been started"),y[e]||(y[e]={}),y[e][t]={startDeltaTime:0,startTime:v[e],url:"unknown"},r=r==h.COMPLETE?h.INVALID_COMPLETE:h.INVALID_ERROR),y[e][t].loadStatus&&f.default.recordGenericError(d,"Attempting to complete "+t+" on "+e+" which has already been completed");var n=Date.now();Object.assign(y[e][t],{endDeltaTime:n-v[e],duration:n-y[e][t].startTime,endTime:n,loadStatus:r})}},{key:"getLoadTimes",value:function(e){return y[e]}}]),e}();Object.defineProperties(b,{loadTypes:{value:p},loadStatus:{value:h}}),r.default=b,r.reset=i,r.getInitTime=a},{"error-report":"error-report",log:"log"}],log:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i={1:"error",2:"warn",3:"info",4:"debug",5:"trace"},a=0,u=Symbol("log"),s=Symbol("lastLogLevel"),l={getConsole:function(){return console}},c={TRACE:5,DEBUG:4,INFO:3,WARN:2,ERROR:1},f={LOG_LEVELS:c,minLogLevel:0,useTimestamp:!1,reporter:l},d=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n(this,e),!t)throw new Error("Logger label must be set");this.label=t,this.logConfig=Object.assign(f,r),this[s]=this.logConfig.minLogLevel}return o(e,[{key:u,value:function(e,t){if(e<=this.logConfig.minLogLevel){var r=this.logConfig.reporter.getConsole(),n=r[i[e]]||r.log,o=["[BVP] "+this.label+":"];this.logConfig.useTimestamp&&o.push(Date.now()),n.apply(r,o.concat(Array.prototype.slice.call(t)))}}},{key:"setMinLogLevel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.logConfig.minLogLevel=e}},{key:"enable",value:function(){this.setMinLogLevel(this[s])}},{key:"disable",value:function(){this[s]=this.logConfig.minLogLevel,this.setMinLogLevel(a)}},{key:"trace",value:function(){this[u](c.TRACE,arguments)}},{key:"debug",value:function(){this[u](c.DEBUG,arguments)}},{key:"info",value:function(){this[u](c.INFO,arguments)}},{key:"warn",value:function(){this[u](c.WARN,arguments)}},{key:"error",value:function(){this[u](c.ERROR,arguments)}}],[{key:"getLogLevels",value:function(){return c}}]),e}();r.default=d},{}],resources:[function(e,t,r){"use strict";t.exports={APP_BUNDLE:"//cdn.gotraffic.net/projector/v0.11.74/app.js",VENDOR_BUNDLE:"//cdn.gotraffic.net/projector/v0.11.74/vendor.js",APP_CSS:"//cdn.gotraffic.net/projector/v0.11.74/bvp.css",CONFIG_OVERWRITES:"//cdn.gotraffic.net/projector/latest/assets/config/config.min.json?v=1",SWF_FILE_NAME_INSIGHTS:"//cdn.gotraffic.net/projector/v0.11.74/BloombergInsightsPlayer.swf",SKIN_FILE_NAME:"//cdn.gotraffic.net/projector/v0.11.74/skin.png",BUFFERING_ANIMATION_FILE_NAME:"//cdn.gotraffic.net/projector/v0.11.74/assets/images/loading_spinner.gif",PERSONALIZATION_API:"//personalization.bloomberg.com",TRITON_TAG:"ttag=device%3Aweb",YOUBORA_ACCOUNT:"bloomberg",GEOIP_API:"//location.bloomberg.com/public/query",TRIGR_API:"//www.bloomberg.com/trigrservice"}},{}],"retry-controller":[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("log"),u=n(a),s=1e3,l=2e3,c=new u.default("RetryController"),f=["retry","resetRetryDelay","dispose"],d=function(){function e(t){var r=this,n=t.name,i=t.tryCallback,a=t.cleanupCallback,u=t.maxRetryDelay;o(this,e),this.name=n,this.tryCallback=i,this.cleanupCallback=a,this.maxRetryDelay=u,this.retryDelay=0,this.retryTimer=null,f.forEach(function(e){return r[e]=r[e].bind(r)})}return i(e,[{key:"resetRetryDelay",value:function(){this.retryDelay<s+l||(c.debug(this.name+" resetting retry interval"),this.retryDelay=this._getInitialRetryDelay())}},{key:"shouldRetry",value:function(){return this.retryDelay<=this.maxRetryDelay}},{key:"retry",value:function(){var e=this;if(!this.shouldRetry()){var t="("+this.name+") retry maxRetryDelay ("+this.maxRetryDelay+") reached. Giving up. "+this.retryDelay;return c.debug(t),Promise.reject(t)}return this._cleanup(),new Promise(function(t){e.retryTimer=setTimeout(function(){c.debug("("+e.name+") retrying..."),e.retryTimer=null,t(e.tryCallback())},e.retryDelay),c.debug("("+e.name+") retrying in "+e.retryDelay+"ms"),e.retryDelay=e.retryDelay>0?2*e.retryDelay:e._getInitialRetryDelay()})}},{key:"dispose",value:function(){this._cleanup()}},{key:"_cleanup",value:function(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null),this.cleanupCallback&&this.cleanupCallback()}},{key:"_getInitialRetryDelay",value:function(){return Math.random()*l+s}}]),e}();r.default=d},{log:"log"}],"script-injector":[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("load-timer"),u=n(a),s=e("log"),l=n(s),c=e("error-report"),f=n(c),d=Array.prototype.slice,p="error",h="loaded",y=new l.default("ScriptInjector"),v=/^http(.*)$/,b=void 0,g=function(){function e(){o(this,e),this.requestQueue={},this.documentScripts=e.getDocumentScripts()}return i(e,[{key:"isLoaded",value:function(t){var r=e.generateScriptKey(t);return Boolean(this.documentScripts[r])}},{key:"isRequested",value:function(t){var r=e.generateScriptKey(t);return Boolean(this.requestQueue[r])}},{key:"inject",value:function(t,r,n){var o=this,i=e.generateScriptKey(t),a=document.querySelector("body");return this.isRequested(t)?this.requestQueue[i]:this.isLoaded(t)?Promise.resolve():(this.requestQueue[i]=e.injectScript(t,a,r,n).then(function(){o.documentScripts[i]=!0,o.requestQueue[i]=null}),this.requestQueue[i])}}],[{key:"getInstance",value:function(){return b||(b=new e),b}},{key:"getDocumentScripts",value:function(){return d.call(document.scripts).reduce(function(t,r){if(r.src){var n=e.generateScriptKey(r.src);t.hasOwnProperty(n)&&y.warn("Duplicate script found: "+r.src),t[r.src]=!0}return t},{})}},{key:"generateScriptKey",value:function(e){v.test(e)||(e=location.protocol+e);var t=new URL(e),r=t.pathname.split("/").slice(-1)[0];return t.host+":"+r}},{key:"injectScript",value:function(e,t,r,n){var o=document.createElement("script");return o.src=e,o.async=!0,new Promise(function(i,a){u.default.trackLoadStart(r,n,e),void 0!==o.onreadystatechange?o.onreadystatechange=function(){h===this.readyState&&(u.default.trackLoadComplete(r,n,u.default.loadStatus.COMPLETE),i(),o.onreadystatechange=o=null)}:o.onload=o.onerror=function(s){return s.type===p?(u.default.trackLoadComplete(r,n,u.default.loadStatus.ERROR),f.default.recordLoadError(y,e,"Script could not be loaded",s),a("Script could not be loaded: "+e),t.removeChild(o),void(o.onload=o.onerror=o=null)):(u.default.trackLoadComplete(r,n,u.default.loadStatus.COMPLETE),i(e),void(o.onload=o.onerror=o=null))},t.appendChild(o)})}}]),e}();r.default=g},{"error-report":"error-report","load-timer":"load-timer",log:"log"}],"triton-stream-provider":[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("script-injector"),u=n(a),s=e("uuid/v4"),l=n(s),c=e("retry-controller"),f=n(c),d=e("bvp-constant"),p=e("load-timer"),h=n(p),y=e("error-report"),v=n(y),b=e("log"),g=n(b),m=e("resources"),_=n(m),w=new g.default("TritonStreamProvider"),E=u.default.getInstance(),O="https://playerservices.live.streamtheworld.com/api/idsync.js",S="https://playerservices.streamtheworld.com/api/livestream",P={mode:"cors",credentials:"same-origin",cache:"no-cache"},T=3e4,A=function(){function e(){o(this,e)}return i(e,null,[{key:"syncAndFetchStreamInfo",value:function(e,t){var r=this,n=e.apiVersion,o=e.mount,i=e.stationId;return this._syncIds(i,t).then(function(){return r.fetchStreamInfo({apiVersion:n,mount:o},t)})}},{key:"fetchStreamInfo",value:function(e,t){var r=this,n=e.apiVersion,o=e.mount,i=S+"?transports=hls&version="+n+"&mount="+o;return new Promise(function(e,n){var a=new f.default({name:"Provision Request",tryCallback:function(){r._fetchStreamMetadata(i,o,t).then(function(t){a.dispose(),e(t)},function(e){return a.shouldRetry()?void a.retry():(w.debug("Maximum retry delay reached. Giving up."),a.dispose(),n(e))})},maxRetryDelay:T});a.retry()})}},{key:"_fetchStreamMetadata",value:function(e,t,r){var n=this;return h.default.trackLoadStart(r,h.default.loadTypes.TRITON_PROVISION_API,e),fetch(e,P).then(function(e){if(!e.ok)throw new Error("Bad response from Triton provision API: "+e.status);return h.default.trackLoadComplete(r,h.default.loadTypes.TRITON_PROVISION_API,h.default.loadStatus.COMPLETE),e.text().then(function(e){var r=window.xml.xmlToJSON(e);return n._buildStreamInfo(r,t)})}).catch(function(t){throw v.default.recordLoadError(w,e,"Unable to load:",t),h.default.trackLoadComplete(r,h.default.loadTypes.TRITON_PROVISION_API,h.default.loadStatus.ERROR),t})}},{key:"_generateSidebandMetadataId",value:function(){return(0,l.default)()}},{key:"_syncIds",value:function(e,t){return E.inject(O+"?stationId="+e,t,h.default.loadTypes.TRITON_ID_SYNC)}},{key:"_buildStreamInfo",value:function(e,t){var r=this,n=e.live_stream_config.mountpoints.mountpoint,o=n.transports.transport["@mountSuffix"],i=n.metadata["sse-sideband"]["@metadataSuffix"],a=n.servers.server.map(function(e){return e.ip.Text}),u=_.default.TRITON_TAG?"&"+_.default.TRITON_TAG:"",s=a.map(function(e){var n=r._generateSidebandMetadataId();return{url:"https://"+e+"/"+t+o+"?sbmid="+n+u,sbmUrl:"https://"+e+"/"+t+i+"?sbmid="+n,type:d.MPEG_STREAM_TYPE}});return s}}]),e}();r.default=A},{"bvp-constant":"bvp-constant","error-report":"error-report","load-timer":"load-timer",log:"log",resources:"resources","retry-controller":"retry-controller","script-injector":"script-injector","uuid/v4":34}]},{},[66,36]);