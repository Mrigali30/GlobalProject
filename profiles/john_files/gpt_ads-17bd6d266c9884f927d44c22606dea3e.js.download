(function(){var e=BLOOMBERG.namespace("gpt_ads"),t={},n={},r=function(){try{return AD_SITE+AD_SUB_SITE}catch(e){return""}}();e.slot_configs=[{url:r,size:[728,90],position:"header-companion-ad",companion:!0},{url:r,size:[300,250],position:"right-companion-ad",companion:!0}],e.global_ad_options=function(){var e=encodeURIComponent(location.hostname),t=Krux.user==undefined?"":Krux.user,n=Krux.segments==undefined?"":Krux.segments,r=AD_KEYWORD==""?"":AD_KEYWORD,i=window.location.pathname,s=AD_SITE+AD_SUB_SITE+AD_ZONE,o=NEGATIVE_AD_CATEGORIES==""?[]:NEGATIVE_AD_CATEGORIES.split(",");return global_ad_options={krux_host:e,krux_uid:t,krux_segments:n,keyword:r,url:i,site:s,network_id:""+GPT_NETWORK_ID,negative_ad_categories:o},global_ad_options},e.init=function(){window.googletag=window.googletag||{},googletag.cmd=googletag.cmd||[],e.init_companion_ads(),googletag.cmd.push(function(){googletag.on&&googletag.on("gpt-slot_rendered",e.after_render_ads),googletag.pubads().collapseEmptyDivs(),googletag.enableServices()})},e.init_companion_ads=function(){googletag.cmd.push(function(){if(document.body&&document.body.getAttribute("class")&&document.body.getAttribute("class").match(/video/)){for(var t=0;t<e.slot_configs.length;t++){var n=e.slot_configs[t],r=googletag.defineSlot("/"+GPT_NETWORK_ID+"/"+n.url,n.size,n.position);n.companion===!0&&r.addService(googletag.companionAds()),r.addService(googletag.pubads())}googletag.companionAds().setRefreshUnfilledSlots(!0),googletag.pubads().disableInitialLoad()}})},e.render_ads=function(){$.each($(".gpt_ad_container"),function(){$container=$(this),global_ad_options=e.global_ad_options(),ad_attributes=e.ad_attributes($container),e.remove_css_border_class($container),googletag.cmd.push(function(){var e=googletag.defineSlot("/"+global_ad_options.network_id+"/"+global_ad_options.site,ad_attributes.size_array,ad_attributes.position);e.addService(googletag.pubads()),e.setTargeting("sz",ad_attributes.ad_size),e.setTargeting("url",global_ad_options.url),e.setTargeting("tile",ad_attributes.tile),e.setTargeting("ist",ad_attributes.ist),e.setTargeting("khost",global_ad_options.krux_host),e.setTargeting("kuid",global_ad_options.krux_uid),e.setTargeting("ksg",global_ad_options.krux_segments),e.setTargeting("keyword",global_ad_options.keyword),e.setTargeting("page",ad_attributes.pt),e.setTargeting(ad_attributes.pt,ad_attributes.tz),e.setTargeting("u",ad_attributes.yield_ex_string),e.setTargeting("kwl",global_ad_options.negative_ad_categories),googletag.cmd.push(function(){googletag.display(ad_attributes.position)})})})},e.ad_attributes=function(t){global_ad_options=e.global_ad_options();var n=t.attr("data-original-position"),r=JSON.parse(t.attr("data-gpt-size")),i=t.attr("data-size"),s=t.attr("data-tile"),o=t.attr("data-tile")=="1"?"dcopt=ist;":"",u=t.attr("data-pt"),a=t.attr("data-tz"),f=global_ad_options.keyword,l=YIELDEX?i+"|"+u+"|"+a+"|"+f:"";return ad_attributes={position:n,size_array:r,ad_size:i,tile:s,ist:o,pt:u,tz:a,yield_ex_string:l},ad_attributes},e.remove_css_border_class=function(e){var t=e.parent(),n=t?t.parent():void 0;n&&n.hasClass("rectangle")&&(t.attr("data-apply-borders","1"),n.removeClass("rectangle"),n.hide())},e.add_css_border_class=function(e){e.parent().addClass("gpt_ads_border")},e.add_css_leader_board=function(e){e.addClass("gpt_ads_nomargin"),e.addClass("gpt_ads_nopadding")},e.format_blank_ads=function(e){e.parent().css("display","none")},e.format_non_blank_ads=function(t){var n=t.parent(),r=n.parent();if(n.hasClass("companion_replace")&&r&&r.find(".companion_ad").css("display")==="block")return e.format_blank_ads(t);t.attr("id")==="leader_board"&&e.add_css_leader_board(t);if(t.data("ad-iframe-height")==1&&t.data("ad-iframe-width")==1){t.css("height","1px");return}t.data("apply-borders")!==undefined&&e.add_css_border_class(t),n&&(n.addClass("non_blank_ad"),n.show())},e.after_render_ads=function(t,n,r,i,s,o){try{var u,a,f=!1,l=s.getSlotId(),s=document.getElementById(l.getDomId());u=e.ad_iframe(s);var c=e.iframe_content(u);c.length>0&&(a=c[0].innerHTML||"",f=a.replace(/^\s+|\s+$/g,"")!=""),f?e.display_ad(s,l,a,u):u.onload=function(){e.display_ad(s,l,a,u)}}catch(t){}},e.ad_iframe=function(e){var t,n=e.getElementsByTagName("iframe");for(var r=0;r<n.length;r++)if(!n[r].getAttribute("id").match(/hidden/)){t=n[r];break}return t},e.iframe_content=function(e){var t=e.contentWindow.document;return t.getElementsByTagName("body")},e.display_ad=function(t,n,r,i){e.display_interstitial(n,r),e.apply_dimensions(t,i)},e.apply_dimensions=function(t,n){$&&($slot=$(t),$iframe=$(n),$slot.data("ad-iframe-height",$iframe.attr("height")),$slot.data("ad-iframe-width",$iframe.attr("width")),$iframe.css({height:$iframe.attr("height")+"px",width:$iframe.attr("width")+"px"}),e.format_non_blank_ads($slot))},e.display_interstitial=function(t,n){if(t.getDomId()==="ad-interstitial"){try{e.is_interstitial_ad_present(n)&&show_interstitial_ad()&&displayGPTInterstitialAd()}catch(r){}return}},e.is_interstitial_ad_present=function(e){return e===undefined?!1:!/noad=1/.test(e)},e.refresh_ads=function(){googletag.pubads().refresh()},e.is_ie=function(){return navigator.userAgent.indexOf("MSIE")!==-1},e.render_inline_ads=function(){$.each($(".inline_gallery_ads"),function(){$container=$(this),global_ad_options=e.global_ad_options(),ad_attributes=e.ad_attributes($container),googletag.cmd.push(function(){var e=googletag.defineSlot("/"+global_ad_options.network_id+"/"+global_ad_options.site,ad_attributes.size_array,ad_attributes.position);e.setTargeting("sz",ad_attributes.ad_size),e.setTargeting("url",global_ad_options.url),e.setTargeting("tile",ad_attributes.tile),e.setTargeting("ist",ad_attributes.ist),e.setTargeting("khost",global_ad_options.krux_host),e.setTargeting("kuid",global_ad_options.krux_uid),e.setTargeting("ksg",global_ad_options.krux_segments),e.setTargeting("keyword",global_ad_options.keyword),e.setTargeting("page",ad_attributes.pt),e.setTargeting(ad_attributes.pt,ad_attributes.tz),e.setTargeting("u",ad_attributes.yield_ex_string),e.setTargeting("kwl",global_ad_options.negative_ad_categories),e.addService(googletag.pubads()),AD_SLOTS[ad_attributes.position]=e,googletag.enableServices(),googletag.display(ad_attributes.position)})})},e.init()})();